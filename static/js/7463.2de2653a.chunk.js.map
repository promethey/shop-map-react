{"version":3,"file":"static/js/7463.2de2653a.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/StreamConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js","../node_modules/@arcgis/core/layers/support/ClientSideConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Error.js\";import o from\"../../core/Evented.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";let c=class extends o.EventedAccessor{destroy(){this.emit(\"destroy\")}get connectionError(){return this.errorString?new e(\"stream-connection\",this.errorString):null}onFeature(r){this.emit(\"data-received\",r)}onMessage(r){this.emit(\"message-received\",r)}};r([t({readOnly:!0})],c.prototype,\"connectionError\",null),c=r([s(\"esri.layers.support.StreamConnection\")],c);const n=c;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Error.js\";import o from\"../../../../core/Logger.js\";import{isSome as s,isNone as r}from\"../../../../core/maybe.js\";import{after as n,createResolver as c}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as i}from\"../../../../core/urlUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as d}from\"../../../../geometry/support/zscale.js\";import h from\"../../../support/StreamConnection.js\";var g;!function(e){e[e.CONNECTING=0]=\"CONNECTING\",e[e.OPEN=1]=\"OPEN\",e[e.CLOSING=2]=\"CLOSING\",e[e.CLOSED=3]=\"CLOSED\"}(g||(g={}));let u=class extends h{constructor(e){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:s}=e;this._config=e,this._featureZScaler=d(t,s,o),this._open()}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),s(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(r(this._websocket))return\"disconnected\";switch(this._websocket.readyState){case g.CONNECTING:case g.OPEN:return\"connected\";case g.CLOSING:case g.CLOSED:return\"disconnected\"}}sendMessageToSocket(e){r(this._websocket)?this._outstandingMessages.push(e):this._websocket.send(JSON.stringify(e))}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,s(this._websocket)&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,s=1e3,r=0){try{if(this.destroyed)return;const t=i(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange(\"connectionStatus\")}catch(c){const i=s/1e3;return this._config.maxReconnectionAttempts&&r>=this._config.maxReconnectionAttempts?(o.getLogger(this.declaredClass).error(new t(\"websocket-connection\",\"Exceeded maxReconnectionAttempts attempts. No further attempts will be made\")),void this.destroy()):(o.getLogger(this.declaredClass).error(new t(\"websocket-connection\",`Failed to connect. Attempting to reconnect in ${i}s`,c)),await n(s),this._tryCreateWebSocket(e,Math.min(1.5*s,1e3*this._config.maxReconnectionInterval),r+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(s){return void o.getLogger(this.declaredClass).error(new t(\"websocket-connection\",\"Failed to parse message, invalid JSON\",{error:s}))}}}_createWebSocket(e){return new Promise(((t,o)=>{const s=new WebSocket(e);s.onopen=()=>{if(s.onopen=null,this.destroyed)return s.onclose=null,void s.close();s.onclose=e=>this._onClose(e),s.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(s),t(s)},s.onclose=e=>{s.onopen=s.onclose=null,o(e)}}))}async _handshake(e=1e4){const s=this._websocket;if(r(s))return;const n=c(),i=s.onmessage,{filter:a,outFields:l,spatialReference:d}=this._config;return n.timeout(e),s.onmessage=e=>{let r=null;try{r=JSON.parse(e.data)}catch(c){}r&&\"object\"==typeof r||(o.getLogger(this.declaredClass).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - malformed message\",e.data)),n.reject(),this.destroy()),r.spatialReference?.wkid!==d?.wkid&&(o.getLogger(this.declaredClass).error(new t(\"websocket-connection\",`Protocol violation. Handshake failed - expected wkid of ${d.wkid}`,e.data)),n.reject(),this.destroy()),\"json\"!==r.format&&(o.getLogger(this.declaredClass).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - format is not set\",e.data)),n.reject(),this.destroy()),a&&r.filter!==a&&o.getLogger(this.declaredClass).error(new t(\"websocket-connection\",\"Tried to set filter, but server doesn't support it\")),l&&r.outFields!==l&&o.getLogger(this.declaredClass).error(new t(\"websocket-connection\",\"Tried to set outFields, but server doesn't support it\")),s.onmessage=i;for(const t of this._outstandingMessages)s.send(JSON.stringify(t));this._outstandingMessages=[],n.resolve()},s.send(JSON.stringify({filter:a,outFields:l,format:\"json\",spatialReference:{wkid:d.wkid}})),n.promise}_onMessage(e){if(this.onMessage(e),\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const t of e.features)s(this._featureZScaler)&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t=\"Encountered an error over WebSocket connection\";this._set(\"errorString\",t),o.getLogger(this.declaredClass).error(\"websocket-connection\",t)}_onClose(e){this._websocket=null,this.notifyChange(\"connectionStatus\"),1e3!==e.code&&o.getLogger(this.declaredClass).error(\"websocket-connection\",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};e([a()],u.prototype,\"connectionStatus\",null),e([a()],u.prototype,\"errorString\",void 0),u=e([l(\"esri.layers.graphics.sources.connections.WebSocketConnection\")],u);export{u as WebSocketConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../request.js\";import r from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{isSome as o,isNone as i,unwrapOr as n,get as a}from\"../../../../core/maybe.js\";import{createResolver as c}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as u}from\"../../../../core/urlUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WebSocketConnection as l}from\"./WebSocketConnection.js\";import{executeQuery as f}from\"../../../../rest/query/operations/query.js\";import h from\"../../../../rest/support/Query.js\";import{fromJSON as g}from\"../../../../geometry/support/jsonUtils.js\";import y from\"../../../../geometry/SpatialReference.js\";const m=1e4,p={maxQueryDepth:5,maxRecordCountFactor:3};let _=class extends l{constructor(e){super({...p,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||s.getLogger(this.declaredClass).warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if(\"attributes\"in e){let i;try{i=this._enrich(e),o(this._featureZScaler)&&this._featureZScaler(i.geometry)}catch(t){return void s.getLogger(this.declaredClass).error(new r(\"geoevent-connection\",\"Failed to parse message\",t))}this.onFeature(i)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:\"json\",...this._config.customParameters},s=t(e.path,{query:r,responseType:\"json\"}),o=(await s).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:s,token:o}=r,i=this._inferWebSocketBaseUrl(s);return u(`${i}/subscribe`,{outSR:\"\"+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes(\"wss\"))return t;return s.getLogger(this.declaredClass).error(new r(\"geoevent-connection\",\"Unable to infer WebSocket url\",e)),null}async _setFilter(e,t){const o=this._websocket;if(i(o)||i(e)&&i(t))return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const u=c(),d=()=>{a||(this.destroyed||this._websocket!==o||s.getLogger(this.declaredClass).error(new r(\"geoevent-connection\",\"Server timed out when setting filter\")),u.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(s.getLogger(this.declaredClass).error(new r(\"geoevent-connection\",\"Failed to set service filter\",t.error)),this._set(\"errorString\",`Could not set service filter - ${t.error}`),u.reject(t.error)),this._setWebSocketJSONParseHandler(o),a=!0,u.resolve())};return o.onmessage=l,o.send(n),setTimeout(d,m),u.promise}_serializeFilter(e,t){const n={};if(i(e)&&i(t))return n;if(o(e)&&e.geometry)try{const t=g(e.geometry);if(\"extent\"!==t.type)throw new r(`Expected extent but found type ${t.type}`);n.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(a){s.getLogger(this.declaredClass).error(new r(\"geoevent-connection\",\"Encountered an error when setting connection geometryDefinition\",a))}return o(e)&&e.where&&\"1 = 1\"!==e.where&&\"1=1\"!==e.where&&(n.where=e.where),o(t)&&(n.outFields=t.join(\",\")),n}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],i=this._relatedFeatures.get(o);if(!i)return s.getLogger(this.declaredClass).warn(\"geoevent-connection\",\"Feature join failed. Is the join field configured correctly?\",e),e;const{attributes:n,geometry:a}=i;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||s.getLogger(this.declaredClass).error(new r(\"geoevent-connection\",\"Found malformed feature - no geometry found\",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),s=this._queryArchive(t);await r;const o=await s;if(!o)return;for(const i of o.features)this.onFeature(this._enrich(i))}catch(e){s.getLogger(this.declaredClass).error(new r(\"geoevent-connection\",\"Encountered an error when querying buddy services\",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await import(\"../../../FeatureLayer.js\")).default)({url:e}),{capabilities:r}=await t.load(),s=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,i=r.query.supportsCentroid,c=this._config.maxRecordCountFactor,u=t.capabilities.query.maxRecordCount,d=s?u*c:u,l=new h;if(l.outFields=n(this._config.outFields,[\"*\"]),l.where=n(a(this._config.filter,\"where\"),\"1=1\"),l.returnGeometry=!0,l.returnExceededLimitFeatures=!0,l.outSpatialReference=y.fromJSON(this._config.spatialReference),i&&(l.returnCentroid=!0),s&&(l.maxRecordCountFactor=c),o)return l.num=d,t.destroy(),this._queryPages(e,l);const g=await f(e,l,this._config.sourceSpatialReference);return t.destroy(),g.data}async _queryPages(e,t,r=[],s=0){t.start=o(t.num)?s*t.num:null;const{data:i}=await f(e,t,this._config.sourceSpatialReference);return i.exceededTransferLimit&&s<(this._config.maxQueryDepth??0)?(i.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,s+1)):(r.forEach((e=>i.features.push(e))),i)}_addRelatedFeatures(e){const t=new Map,r=e.features,s=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[s];t.set(e,o)}this._relatedFeatures=t}};_=e([d(\"esri.layers.graphics.sources.connections.GeoEventConnection\")],_);const w=_;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{isSome as r}from\"../../core/maybe.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as s}from\"../../geometry/support/zscale.js\";import c from\"./StreamConnection.js\";let a=class extends c{constructor(e){super(),this.connectionStatus=\"connected\",this.errorString=null;const{geometryType:r,spatialReference:t,sourceSpatialReference:o}=e;this._featureZScaler=s(r,o,t)}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if(\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const t of e.features)r(this._featureZScaler)&&this._featureZScaler(t.geometry),this.onFeature(t)}this.onMessage(e)}};e([t()],a.prototype,\"connectionStatus\",void 0),e([t()],a.prototype,\"errorString\",void 0),a=e([o(\"esri.layers.support.ClientSideConnection\")],a);export{a as ClientSideConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"./GeoEventConnection.js\";import{WebSocketConnection as t}from\"./WebSocketConnection.js\";import{ClientSideConnection as n}from\"../../../support/ClientSideConnection.js\";function o(o,r,s,i,c,a,m,p){const f={source:o,sourceSpatialReference:r,spatialReference:s,geometryType:i,filter:c,maxReconnectionAttempts:a,maxReconnectionInterval:m,customParameters:p};if(!o)return new n(f);return o.path.startsWith(\"wss://\")||o.path.startsWith(\"ws://\")?new t(f):new e(f)}export{o as createConnection};\n"],"names":["c","_o$EventedAccessor","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","this","emit","get","errorString","e","r","o","t","readOnly","prototype","g","n","s","CONNECTING","OPEN","CLOSING","CLOSED","u","_h","_this","call","_outstandingMessages","geometryType","spatialReference","sourceSpatialReference","_config","_featureZScaler","d","_open","_open2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","_tryCreateWebSocket","t0","destroyed","_handshake","stop","_get","_getPrototypeOf","_websocket","onopen","onclose","onerror","onmessage","close","readyState","push","send","JSON","stringify","_onMessage","customParameters","_tryCreateWebSocket2","_callee2","_this$_config$customP","_t","_i","_args2","_context2","length","undefined","source","path","abrupt","i","_createWebSocket","sent","notifyChange","maxReconnectionAttempts","t1","declaredClass","error","destroy","concat","Math","min","maxReconnectionInterval","_this2","parse","data","_this3","Promise","WebSocket","_onClose","_onError","_setWebSocketJSONParseHandler","_handshake2","_callee3","_this$_config","a","l","_this4","_args3","_context3","filter","outFields","timeout","_r$spatialReference","reject","wkid","format","_step","_iterator","_createForOfIteratorHelper","done","err","f","resolve","promise","onMessage","type","_step2","_iterator2","features","geometry","onFeature","_set","code","h","p","maxQueryDepth","maxRecordCountFactor","_","_l","_objectSpread","_buddyServicesQuery","_relatedFeatures","_fetchServiceDefinition","timeInfo","trackIdField","warn","_fetchWebSocketUrl","streamUrls","_queryBuddyServices","_setFilter","_enrich","_fetchServiceDefinition2","query","responseType","_serviceDefinition","_x","urls","token","_inferWebSocketBaseUrl","outSR","includes","_setFilter2","_serializeFilter","setTimeout","_x2","_x3","shiftCentralMeridian","where","join","relatedFeatures","joinField","attributes","centroid","_queryBuddyServices2","_callee4","_this$_serviceDefinit","_e","_t3","_r2","_s","_o","_i2","_context4","keepLatestArchive","_queryRelatedFeatures","_queryArchive","_queryRelatedFeatures2","_callee5","_context5","_queryBuddy","featuresUrl","_addRelatedFeatures","_x4","_queryArchive2","_callee6","_context6","_x5","_queryBuddy2","_callee7","_yield$t$load","_context7","default","url","load","capabilities","supportsMaxRecordCountFactor","supportsPagination","supportsCentroid","maxRecordCount","returnGeometry","returnExceededLimitFeatures","outSpatialReference","y","returnCentroid","num","_queryPages","_x6","_queryPages2","_callee8","_this$_config$maxQuer","_yield$f","_args8","_context8","start","exceededTransferLimit","forEach","_x7","_x8","_step3","Map","_iterator3","set","w","_c","connectionStatus","m","startsWith"],"sourceRoot":""}