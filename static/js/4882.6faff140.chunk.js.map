{"version":3,"file":"static/js/4882.6faff140.chunk.js","mappings":"+RAI+MA,EAAE,SAACC,EAAEC,GAAC,OAAGD,EAAEE,IAAIC,MAAMF,EAAEC,IAAIC,OAAO,EAAEH,EAAEE,IAAIC,MAAMF,EAAEC,IAAIC,MAAMH,EAAEE,IAAIE,IAAIH,EAAEC,IAAIE,KAAK,EAAEJ,EAAEE,IAAIE,IAAIH,EAAEC,IAAIE,IAAIJ,EAAEE,IAAIG,IAAIJ,EAAEC,IAAIG,GAAG,EAAOC,EAAC,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAJ,GAAW,SAAAA,EAAYN,GAAE,IAAAW,EAA6B,OAA7BC,EAAAA,EAAAA,GAAA,KAAAN,IAACK,EAAAF,EAAAI,KAAA,OAAaC,cAAcd,EAACW,CAAA,CAAmxB,OAAlxBI,EAAAA,EAAAA,GAAAT,EAAA,EAAAJ,IAAA,uBAAAc,IAAA,WAA2B,OAAM,CAAE,GAAC,CAAAd,IAAA,iBAAAe,MAAA,SAAejB,GAAGkB,KAAKC,aAAapB,GAAGmB,KAAKE,oBAAoBpB,IAAEqB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAhB,EAAAiB,WAAA,uBAAAV,KAAA,KAAsBb,EAAE,GAAC,CAAAE,IAAA,qBAAAe,MAAA,SAAmBjB,GAAQ,IAAOC,EAAGD,EAATwB,MAAWC,GAACJ,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAhB,EAAAiB,WAAA,2BAAAV,KAAA,KAA0Bb,GAAG,OAAOyB,EAAEC,cAAcR,KAAKJ,cAAca,uBAAuB1B,EAAE2B,OAAOzB,MAAMsB,EAAEI,aAAaX,KAAKJ,cAAcgB,SAASC,YAAY9B,EAAE2B,OAAOH,CAAC,GAAC,CAAAvB,IAAA,sBAAAe,MAAA,SAAoBhB,GAAE,IAAA+B,EAAA,KAAOjC,GAACsB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAhB,EAAAiB,WAAA,4BAAAV,KAAA,KAA2BZ,GAAG,OAAOF,EAAEkC,KAAKhC,EAAEiC,mBAAmB,CAACC,KAAK,UAAUC,QAAQ,CAACC,EAAAA,GAAGC,UAAUtC,EAAAA,GAAAA,MAAQA,EAAAA,GAAAA,IAAMA,EAAAA,GAAAA,UAAYuC,OAAO,kBAAIP,EAAKQ,kBAAkB,MAAIC,EAAAA,EAAAA,GAAI,qBAAqB1C,EAAEkC,KAAKhC,EAAEiC,mBAAmB,CAACC,KAAK,WAAWC,QAAQ,CAACX,EAAAA,GAAGa,UAAUtC,EAAAA,GAAAA,MAAQuC,OAAO,kBAAIP,EAAKU,QAAQ,KAAI3C,CAAC,GAAC,CAAAG,IAAA,mBAAAe,MAAA,WAAmB,OAAOC,KAAKwB,QAAQ,GAAC,CAAAxC,IAAA,sBAAAe,MAAA,SAAoBjB,GAAG,IAAoC2C,EAAhC1C,EAAE,EAAE2C,GAAAC,EAAAA,EAAAA,GAAe3B,KAAKwB,UAAQ,IAA5B,IAAAE,EAAAnB,MAAAkB,EAAAC,EAAA7C,KAAA+C,MAA6B,CAAlBH,EAAA1B,MAAoB8B,WAAW9C,GAAE,CAAC,OAAA+C,GAAAJ,EAAA5C,EAAAgD,EAAA,SAAAJ,EAAAK,GAAA,MAAC3C,CAAA,CAAz0B,CAASL,EAAAA,E,oJCAnMA,EAAC,SAAAiD,IAAA1C,EAAAA,EAAAA,GAAAP,EAAAiD,GAAA,IAAAzC,GAAAC,EAAAA,EAAAA,GAAAT,GAAW,SAAAA,EAAYoC,EAAEZ,EAAEnB,EAAEL,EAAEkD,EAAEC,GAAU,IAAAzC,EAARZ,EAACsD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAACF,EAAEK,EAACH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAACD,EAAkM,OAAjMxC,EAAAA,EAAAA,GAAA,KAAAX,IAAEU,EAAAF,EAAAI,KAAA,OAAa4C,6BAA6B,EAAE9C,EAAK+C,cAAc,EAAE/C,EAAKgD,QAAQ,KAAKhD,EAAKT,IAAI,IAAIF,EAAAA,EAAEqC,GAAG1B,EAAKiD,WAAWnC,EAAEd,EAAKkD,EAAEvD,EAAEK,EAAKmD,EAAE7D,EAAEU,EAAKoD,MAAMZ,EAAExC,EAAKqD,OAAOZ,EAAEzC,EAAKsD,OAAOlE,EAAEY,EAAKuD,OAAOV,EAAC7C,CAAA,CAA8U,OAA7UI,EAAAA,EAAAA,GAAAd,EAAA,EAAAC,IAAA,UAAAe,MAAA,WAAUC,KAAKyC,UAAUzC,KAAKyC,QAAQQ,UAAUjD,KAAKyC,QAAQ,KAAK,GAAC,CAAAzD,IAAA,eAAAe,MAAA,SAAaX,GAAS,IAAAN,EAAEkB,KAAK0C,YAAYtD,EAAEsD,WAAWtD,EAAE8D,YAAYnE,EAAEiB,KAAKmD,WAAWC,SAAQC,EAAOjE,EAAEkE,mBAAmB,CAAC,EAAE,GAAG,CAACtD,KAAK2C,EAAE3C,KAAK4C,IAAGW,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAhDpB,EAACsB,EAAA,GAACrB,EAACqB,EAAA,GAA8C1E,EAAEmB,KAAK6C,MAAM7C,KAAK+C,OAAOjE,EAAEwD,EAAEtC,KAAK8C,OAAO9C,KAAKgD,OAAOlE,GAAEqC,EAAAA,EAAAA,GAAEpC,EAAEF,EAAE,EAAE,EAAE,EAAEyD,EAAE,EAAEL,EAAEC,EAAE,IAAG3B,EAAAA,EAAAA,GAAEP,KAAKmD,WAAWM,IAAIrE,EAAEsE,gBAAgB3E,EAAE,KAACA,CAAA,CAAzjB,CAASK,EAAAA,E,wXCA6xBwD,EAAE,CAAC,OAAO,OAAO,KAAK,KAAK,QAAQe,EAAE,CAAC,EAAE,GAAOC,EAAC,SAAAC,IAAAvE,EAAAA,EAAAA,GAAAsE,EAAAC,GAAA,IAAAtE,GAAAC,EAAAA,EAAAA,GAAAoE,GAA2B,SAAAA,IAAa,IAAAnE,EAA6G,OAA7GC,EAAAA,EAAAA,GAAA,KAAAkE,IAACnE,EAAAF,EAAAuE,MAAA,KAAS3B,YAAgB4B,cAAc,KAAKtE,EAAKuE,YAAY,KAAKvE,EAAKwE,cAAc,IAAIC,IAAIzE,EAAK0E,MAAM,KAAI1E,CAAA,CAAg1G,OAA/0GI,EAAAA,EAAAA,GAAA+D,EAAA,EAAA5E,IAAA,gBAAAc,IAAA,WAAoB,IAAMhB,EAAEkB,KAAKoE,oCAAoCpE,KAAKmE,MAAME,aAAa,OAAOvF,GAAGA,EAAEwF,KAAKtE,KAAKmE,MAAME,YAAYE,kBAAkBvE,KAAKmE,MAAME,YAAYE,gBAAgBzF,EAAEwF,IAAIxF,GAAG,IAAI,GAAC,CAAAE,IAAA,SAAAe,MAAA,SAAOjB,GAAGkB,KAAKgE,YAAYQ,QAAQxE,KAAKgE,YAAY1D,MAAMxB,EAAEwB,MAAMN,KAAK+D,cAAcU,OAAO3F,GAAGkB,KAAKgE,YAAYU,QAAQ,GAAC,CAAA1F,IAAA,SAAAe,MAAA,WAAQ,IAAA4E,EAAA7D,EAAA,KAAOhC,EAAoB,QAAnB6F,EAAC3E,KAAK4E,qBAAa,IAAAD,OAAA,EAAlBA,EAAoB/D,SAAS9B,IAAIkB,KAAKJ,cAAc,IAAIf,EAAAA,EAAEC,GAAGkB,KAAKgE,YAAY,IAAIa,EAAAA,EAAE,CAACC,aAAa9E,KAAKJ,cAAcmF,YAAY,GAAGC,QAAQ,SAAClG,EAAEqC,GAAC,OAAGL,EAAKmE,UAAUnG,EAAEqC,EAAE,IAAGnB,KAAK+D,cAAc,IAAIhC,EAAAA,EAAE,CAACmD,YAAY,OAAOC,YAAW,EAAGC,YAAY,SAAAtG,GAAC,OAAEgC,EAAKsE,YAAYtG,EAAE,EAACuG,YAAY,SAAAvG,GAAC,OAAEgC,EAAKuE,YAAYvG,EAAE,EAACgG,aAAa9E,KAAKJ,gBAAgBI,KAAKsF,kBAAiB/E,EAAAA,EAAAA,KAAG,eAAAgF,EAAAC,EAAA,MAAI,CAAW,QAAXD,EAACzE,EAAKqD,aAAK,IAAAoB,GAAa,QAAbC,EAAVD,EAAYlB,mBAAW,IAAAmB,OAAb,EAAVA,EAAyBC,QAAQ3E,EAAK8D,cAAc,IAAG,kBAAI9D,EAAK4E,UAAU,MAAGvF,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAwD,EAAAvD,WAAA,eAAAV,KAAA,MAAgB,GAAC,CAAAX,IAAA,SAAAe,MAAA,WAAQ,IAAA4F,EAAAC,GAACzF,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAwD,EAAAvD,WAAA,eAAAV,KAAA,MAAiC,QAAjCgG,EAAe3F,KAAK+D,qBAAa,IAAA4B,GAAlBA,EAAoBE,UAA0B,QAAjBD,EAAC5F,KAAKgE,mBAAW,IAAA4B,GAAhBA,EAAkBC,UAAU7F,KAAKgE,YAAYhE,KAAK+D,cAAc/D,KAAKJ,cAAc,IAAI,GAAC,CAAAZ,IAAA,YAAAe,MAAA,WAAYC,KAAK8F,eAAe,GAAC,CAAA9G,IAAA,aAAAe,MAAA,WAAaC,KAAK8F,eAAe,GAAC,CAAA9G,IAAA,UAAAe,MAAA,WAAUC,KAAK8F,eAAe,GAAC,CAAA9G,IAAA,cAAAe,MAAA,SAAYjB,GAAGkB,KAAKgE,YAAY+B,MAAMjH,EAAEE,IAAIsF,IAAItE,KAAKgG,YAAYC,YAAYnH,GAAGA,EAAEoH,KAAK,UAAU,kBAAIpH,EAAE+G,SAAS,IAAG7F,KAAK8F,eAAe,GAAC,CAAA9G,IAAA,cAAAe,MAAA,SAAYjB,GAAE,IAAAqH,EAAAC,EAAAC,EAAOlF,EAAEnB,KAAKgG,YAAYM,WAAWxH,GAAGM,EAAE+B,EAAEoF,OAAO,OAAMJ,EAAUnG,KAAKJ,cAAc4G,cAAc7C,EAAExC,EAAEnC,KAAIoH,GAAA5C,EAAAA,EAAAA,GAAA2C,EAAA,GAAlD/G,EAAEuD,EAACyD,EAAA,GAAChH,EAAEwD,EAACwD,EAAA,GAA4ChH,EAAEsD,WAAW1C,KAAKJ,cAAc6G,kBAAkBtF,EAAEnC,KAAIqH,GAAA7C,EAAAA,EAAAA,GAAoBxD,KAAKJ,cAAcgB,SAAS8F,KAAI,GAAlDtH,EAAEyD,MAAKwD,EAAA,GAACjH,EAAE0D,OAAMuD,EAAA,GAAmCrG,KAAK2G,kBAAkBxF,GAAGnB,KAAKgG,YAAYY,SAASzF,GAAGnB,KAAK8F,gBAAgB3E,CAAC,GAAC,CAAAnC,IAAA,YAAAe,MAAA,eAAA8G,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,QAAmBrH,KAAKsH,UAAUtH,KAAKuH,iBAAiBvH,KAAKwH,WAAWxH,KAAK0F,WAAU,wBAAAyB,EAAAM,OAAA,GAAAR,EAAA,UAAC,yBAAAJ,EAAA/C,MAAA,KAAA3B,UAAA,EAAxF,IAAwF,CAAAnD,IAAA,aAAAe,MAAA,WAAY,IAAA2H,EAAAC,EAAC,OAAiC,QAAjCD,EAAuB,QAAvBC,EAAO3H,KAAKgE,mBAAW,IAAA2D,OAAA,EAAhBA,EAAkBC,gBAAQ,IAAAF,GAAAA,CAAI,GAAC,CAAA1I,IAAA,YAAAe,MAAA,eAAA8H,GAAAf,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAc,EAAgBhJ,GAAC,IAAAqC,EAAAZ,EAAAxB,EAAAgJ,EAAAzF,EAAA0F,EAAA9F,EAAAF,EAAAiG,EAAA5I,EAAA6I,EAAA/F,UAAA,OAAA4E,EAAAA,EAAAA,KAAAG,MAAA,SAAAiB,GAAA,cAAAA,EAAAf,KAAAe,EAAAd,MAAA,OAAqG,GAApGlG,EAAC+G,EAAA9F,OAAA,QAAAC,IAAA6F,EAAA,GAAAA,EAAA,GAAC,CAAC,EAAS3H,EAAE,iBAAiBP,KAAKmE,MAAMnE,KAAKmE,MAAMiE,aAAa,KAAarJ,EAAuBoC,EAA9BkH,OAAMN,EAAwB5G,EAArBmH,gBAAgBhG,OAAC,IAAAyF,EAAC,EAACA,EAAQxH,EAAC,CAAA4H,EAAAd,KAAA,eAAAc,EAAAI,OAAA,SAAQvI,KAAKwI,YAAY1J,EAAEC,IAAE,OAAuB,OAAhBiJ,EAAE,IAAIS,EAAAA,EAAE,EAAE,EAAE,EAAE,GAAEN,EAAAf,KAAA,EAAAe,EAAAd,KAAA,EAAiB9G,EAAEmI,0BAA0B5J,EAAEG,MAAMH,EAAEI,IAAIJ,EAAEK,IAAI6I,EAAE,CAACK,OAAOtJ,IAAG,cAAAoJ,EAAAd,KAAA,GAASrH,KAAKwI,YAAYR,EAAEjJ,GAAE,QAA7BmD,EAACiG,EAAAQ,KAAAR,EAAAd,KAAA,oBAAAc,EAAAf,KAAA,GAAAe,EAAAS,GAAAT,EAAA,WAAyC/I,EAAAA,EAAAA,IAAC+I,EAAAS,IAAG,CAAAT,EAAAd,KAAA,eAAAc,EAAAS,GAAA,aAAYtG,EAAE,GAAC,CAAA6F,EAAAd,KAAA,SAAkD,KAA1CjI,EAAEY,KAAKJ,cAAciJ,gBAAgB/J,EAAEwF,KAAQ,CAAA6D,EAAAd,KAAA,SAAkB,OAAV9G,EAAE,IAAIkI,EAAAA,EAAErJ,GAAE+I,EAAAd,KAAA,GAASrH,KAAKiF,UAAU1E,GAACuI,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK3H,GAAC,IAACmH,gBAAgBhG,EAAE,KAAG,QAAnD,OAADvD,EAACoJ,EAAAQ,KAAAR,EAAAI,OAAA,UAA2DQ,EAAAA,EAAAA,GAAE/I,KAAKJ,cAAcb,EAAEwB,EAAEzB,IAAE,cAAAqJ,EAAAS,GAAA,eAAAT,EAAAI,OAAA,UAAiBQ,EAAAA,EAAAA,GAAE/I,KAAKJ,cAAcsC,EAAE8F,EAAElJ,IAAE,yBAAAqJ,EAAAV,OAAA,GAAAK,EAAA,mBAAC,gBAAAkB,GAAA,OAAAnB,EAAA/D,MAAA,KAAA3B,UAAA,EAA7gB,IAA6gB,CAAAnD,IAAA,YAAAe,MAAA,WAAY,IAAMjB,GAACqB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAwD,EAAAvD,WAAA,kBAAAV,KAAA,MAAmB,OAAOb,EAAE,OAAOkB,KAAK4E,cAAc9F,CAAC,GAAC,CAAAE,IAAA,2BAAAe,MAAA,SAAyBjB,GAAE,IAAAmK,EAAAC,EAAC,OAA0F,QAA1FD,EAA4C,QAA5CC,EAAOlJ,KAAKmE,MAAME,YAAY8E,sBAAc,IAAAD,OAAA,EAArCA,EAAuCE,MAAM,SAAAjI,GAAC,IAAAkI,EAAA,OAAErB,EAAAA,EAAAA,IAAY,QAAXqB,EAAClI,EAAEP,gBAAQ,IAAAyI,OAAA,EAAVA,EAAYC,iBAAiBxK,EAAE,WAAE,IAAAmK,GAAAA,CAAI,GAAC,CAAAjK,IAAA,oBAAAe,MAAA,eAAAwJ,GAAAzC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAwC,EAAwB1K,GAAC,IAAA2K,EAAAC,EAAA,YAAA3C,EAAAA,EAAAA,KAAAG,MAAA,SAAAyC,GAAA,cAAAA,EAAAvC,KAAAuC,EAAAtC,MAAA,UAAMrH,KAAKgE,YAAYzC,IAAIzC,EAAEE,IAAIsF,IAAG,CAAAqF,EAAAtC,KAAA,gBAAAsC,EAAAvC,KAAA,EAAAuC,EAAAtC,KAAA,EAAoBrH,KAAKgE,YAAYjD,KAAKjC,EAAEE,KAAI,OAApCmC,EAACwI,EAAAhB,KAAoC7J,EAAEyH,OAAOqD,OAAOzI,EAAErC,EAAEyH,OAAO1D,MAAM7C,KAAKJ,cAAcgB,SAAS8F,KAAK,GAAG5H,EAAEyH,OAAOzD,OAAO9C,KAAKJ,cAAcgB,SAAS8F,KAAK,GAAG5H,EAAEoH,KAAK,UAAU,kBAAIwD,EAAK5D,eAAe,IAAE6D,EAAAtC,KAAA,gBAAAsC,EAAAvC,KAAA,EAAAuC,EAAAf,GAAAe,EAAA,UAAUvK,EAAAA,EAAAA,IAACuK,EAAAf,KAAKzH,EAAAA,EAAAA,UAAYnB,KAAK6J,eAAeC,MAAKH,EAAAf,IAAG,QAAC5I,KAAK8F,gBAAe,yBAAA6D,EAAAlC,OAAA,GAAA+B,EAAA,kBAAE,gBAAAO,GAAA,OAAAR,EAAAzF,MAAA,KAAA3B,UAAA,EAAjW,IAAiW,CAAAnD,IAAA,cAAAe,MAAA,eAAAiK,GAAAlD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAiD,EAAkBnL,EAAEqC,GAAC,OAAA4F,EAAAA,EAAAA,KAAAG,MAAA,SAAAgD,GAAA,cAAAA,EAAA9C,KAAA8C,EAAA7C,MAAA,cAAA6C,EAAA3B,OAAA,SAASvI,KAAKmE,MAAMgG,qBAAqBrL,EAAEG,MAAMH,EAAEI,IAAIJ,EAAEK,IAAI,CAACkJ,OAAOlH,KAAG,wBAAA+I,EAAAzC,OAAA,GAAAwC,EAAA,UAAC,gBAAAG,EAAAC,GAAA,OAAAL,EAAAlG,MAAA,KAAA3B,UAAA,EAA9F,IAA8F,CAAAnD,IAAA,WAAAe,MAAA,WAAU,IAAAuK,EAAA,KAACtK,KAAKgE,YAAYuG,QAAQvK,KAAK+D,cAAcyG,MAAMC,SAAS,SAAA3L,GAAI,GAAIA,EAAEyH,OAAOqD,OAAb,CAA2B,IAAMzI,EAAE,CAACmD,GAAGxF,EAAEE,IAAIsF,GAAGoG,WAAU,EAAGC,QAAQL,EAAKtG,YAAYjD,KAAKjC,EAAEE,KAAK4L,MAAM,SAAAzJ,GAAIrC,EAAEyH,OAAOqD,OAAOzI,CAAC,IAAI0J,OAAO,SAAA1J,IAAI/B,EAAAA,EAAAA,IAAE+B,KAAKrC,EAAEyH,OAAOqD,OAAO,KAAK,IAAIkB,SAAS,WAAKhM,EAAEiM,gBAAgB5J,EAAEuJ,WAAU,CAAE,KAAKJ,EAAKrG,cAAc+G,IAAIlM,EAAEqC,EAA9N,CAAgO,GAAG,GAAC,CAAAnC,IAAA,sCAAAe,MAAA,SAAoCjB,GAAG,IAAMqC,EAAEnB,KAAKiL,KAAK3B,iBAAiB,IAAIxK,EAAEqK,eAAe,OAAO,KAAK,IAAI/J,EAAEN,EAAEqK,eAAe+B,MAAM,SAAApM,GAAC,IAAAqM,EAAA,OAAEnD,EAAAA,EAAAA,IAAY,QAAXmD,EAACrM,EAAE8B,gBAAQ,IAAAuK,OAAA,EAAVA,EAAY7B,iBAAiBnI,EAAE,IAAG,OAAO/B,GAAG+B,EAAEiK,gBAAgBhM,EAAEN,EAAEqK,eAAe+B,MAAM,SAAApM,GAAC,IAAAuM,EAAAC,EAAA,OAAE1I,EAAE2I,SAA0C,QAAlCF,EAAW,QAAXC,EAACxM,EAAE8B,gBAAQ,IAAA0K,OAAA,EAAVA,EAAYhC,iBAAiBkC,YAAI,IAAAH,EAAAA,GAAG,EAAE,KAAIjM,CAAC,KAACwE,CAAA,CAAr+G,EAAe6H,EAAAA,EAAAA,IAAEvJ,EAAAA,EAAAA,IAAED,EAAAA,EAAAA,GAAEyJ,EAAAA,OAAk9G5M,EAAAA,EAAAA,GAAE,EAACC,EAAAA,EAAAA,OAAK6E,EAAEvD,UAAU,mBAAc,IAAQvB,EAAAA,EAAAA,GAAE,EAACC,EAAAA,EAAAA,IAAE,CAAC4M,UAAS,KAAM/H,EAAEvD,UAAU,gBAAgB,MAAyD,IAAMuL,EAAzDhI,GAAE9E,EAAAA,EAAAA,GAAE,EAACwD,EAAAA,EAAAA,GAAE,yCAAyCsB,E","sources":["../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","../node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js","../node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{WGLDrawPhase as e}from\"./enums.js\";import r from\"./WGLContainer.js\";import s from\"./brushes/WGLBrushInfo.js\";import t from\"./brushes/WGLBrushStencil.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends r{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:\"stencil\",brushes:[t],drawPhase:e.DEBUG|e.MAP|e.HIGHLIGHT,target:()=>this.getStencilTarget()})),has(\"esri-tiles-debug\")&&n.push(r.registerRenderPass({name:\"tileInfo\",brushes:[s],drawPhase:e.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{s as t,m as s}from\"../../../../chunks/mat3.js\";import{DisplayObject as i}from\"../DisplayObject.js\";import e from\"../../tiling/TileKey.js\";class r extends i{constructor(t,s,i,r,h,o,n=h,a=o){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new e(t),this.resolution=s,this.x=i,this.y=r,this.width=h,this.height=o,this.rangeX=n,this.rangeY=a}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(i){const e=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[h,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),n=this.width/this.rangeX*e,a=this.height/this.rangeY*e;t(r,n,0,0,0,a,0,h,o,1),s(this.transforms.dvs,i.displayViewMat3,r)}}export{r as TiledDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as s}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{BitmapTileLayerView2D as o}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import{resampleImage as c}from\"./support/imageUtils.js\";import n from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileKey.js\";import p from\"../tiling/TileQueue.js\";import f from\"../tiling/TileStrategy.js\";import m from\"../../layers/LayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";const y=[102113,102100,3857,3785,900913],_=[0,0];let w=class extends(d(o(h(m)))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this._tileRequests=new Map,this.layer=null}get tileMatrixSet(){const e=this._getTileMatrixSetBySpatialReference(this.layer.activeLayer);return e?(e.id!==this.layer.activeLayer.tileMatrixSetId&&(this.layer.activeLayer.tileMatrixSetId=e.id),e):null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=this.tileMatrixSet?.tileInfo;e&&(this._tileInfoView=new n(e),this._fetchQueue=new p({tileInfoView:this._tileInfoView,concurrency:16,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new f({cachePolicy:\"keep\",resampling:!0,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.addAttachHandles(s((()=>[this.layer?.activeLayer?.styleId,this.tileMatrixSet]),(()=>this._refresh()))),super.attach())}detach(){super.detach(),this._tileStrategy?.destroy(),this._fetchQueue?.destroy(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}async doRefresh(){!this.attached||this.updateRequested||this.suspended||this._refresh()}isUpdating(){return this._fetchQueue?.updating??!1}async fetchTile(e,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!s)return this._fetchImage(e,r);const l=new u(0,0,0,0);let o;try{await s.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),o=await this._fetchImage(l,r)}catch(h){if(i(h))throw h;if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new u(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return c(this._tileInfoView,r,s,e)}}throw h}return c(this._tileInfoView,o,l,e)}canResume(){const e=super.canResume();return e?null!==this.tileMatrixSet:e}supportsSpatialReference(e){return this.layer.activeLayer.tileMatrixSets?.some((t=>l(t.tileInfo?.spatialReference,e)))??!1}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(s){i(s)||t.getLogger(this.declaredClass).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchImageBitmapTile(e.level,e.row,e.col,{signal:t})}_refresh(){this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>{if(!e.bitmap.source)return;const t={id:e.key.id,fulfilled:!1,promise:this._fetchQueue.push(e.key).then((t=>{e.bitmap.source=t})).catch((t=>{i(t)||(e.bitmap.source=null)})).finally((()=>{e.requestRender(),t.fulfilled=!0}))};this._tileRequests.set(e,t)}))}_getTileMatrixSetBySpatialReference(e){const t=this.view.spatialReference;if(!e.tileMatrixSets)return null;let i=e.tileMatrixSets.find((e=>l(e.tileInfo?.spatialReference,t)));return!i&&t.isWebMercator&&(i=e.tileMatrixSets.find((e=>y.includes(e.tileInfo?.spatialReference.wkid??-1)))),i}};e([r()],w.prototype,\"_fetchQueue\",void 0),e([r({readOnly:!0})],w.prototype,\"tileMatrixSet\",null),w=e([a(\"esri.views.2d.layers.WMTSLayerView2D\")],w);const g=w;export{g as default};\n"],"names":["n","e","r","key","level","row","col","i","_r","_inherits","_super","_createSuper","_this","_classCallCheck","call","_tileInfoView","_createClass","get","value","this","sortChildren","setStencilReference","_get","_getPrototypeOf","prototype","state","s","requiredLevel","getClosestInfoForScale","scale","displayLevel","tileInfo","scaleToZoom","_this2","push","registerRenderPass","name","brushes","t","drawPhase","target","getStencilTarget","has","children","_step","_iterator","_createForOfIteratorHelper","done","stencilRef","err","f","_i","h","o","arguments","length","undefined","a","triangleCountReportedInDebug","triangleCount","texture","resolution","x","y","width","height","rangeX","rangeY","dispose","pixelRatio","transforms","tileMat3","_i$toScreenNoRotation","toScreenNoRotation","_i$toScreenNoRotation2","_slicedToArray","dvs","displayViewMat3","_","w","_d","apply","_tileStrategy","_fetchQueue","_tileRequests","Map","layer","_getTileMatrixSetBySpatialReference","activeLayer","id","tileMatrixSetId","pause","update","resume","_this$tileMatrixSet","tileMatrixSet","p","tileInfoView","concurrency","process","fetchTile","cachePolicy","resampling","acquireTile","releaseTile","addAttachHandles","_this2$layer","_this2$layer$activeLa","styleId","_refresh","_this$_tileStrategy","_this$_fetchQueue","destroy","requestUpdate","abort","_bitmapView","removeChild","once","_this$_tileInfoView$g","_this$_tileInfoView$g2","_this$_tileInfoView$t","createTile","bitmap","getTileCoords","getTileResolution","size","_enqueueTileFetch","addChild","_doRefresh","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","attached","updateRequested","suspended","stop","_this$_fetchQueue$upd","_this$_fetchQueue2","updating","_fetchTile","_callee2","_t$resamplingLevel","l","_s","_args2","_context2","tilemapCache","signal","resamplingLevel","abrupt","_fetchImage","u","fetchAvailabilityUpsample","sent","t0","getTileParentId","_objectSpread","c","_x","_this$layer$activeLay","_this$layer$activeLay2","tileMatrixSets","some","_t$tileInfo","spatialReference","_enqueueTileFetch2","_callee3","_t","_this3","_context3","source","declaredClass","error","_x2","_fetchImage2","_callee4","_context4","fetchImageBitmapTile","_x3","_x4","_this4","reset","tiles","forEach","fulfilled","promise","then","catch","finally","requestRender","set","view","find","_e$tileInfo","isWebMercator","_e$tileInfo$spatialRe","_e$tileInfo2","includes","wkid","d","m","readOnly","g"],"sourceRoot":""}