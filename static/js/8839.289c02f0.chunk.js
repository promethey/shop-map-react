"use strict";(self.webpackChunkshop_map_react=self.webpackChunkshop_map_react||[]).push([[8839],{11873:function(e,t,n){function i(){return[1,0,0,0,1,0,0,0,1]}function r(e,t,n,i,r,o,a,s,l){return[e,t,n,i,r,o,a,s,l]}function o(e,t){return new Float64Array(e,t,9)}n.d(t,{a:function(){return o},c:function(){return i},f:function(){return r}});Object.freeze(Object.defineProperty({__proto__:null,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:i,createView:o,fromValues:r},Symbol.toStringTag,{value:"Module"}))},13491:function(e,t,n){n.d(t,{Q:function(){return f}});var i=n(60136),r=n(29388),o=n(37762),a=n(15671),s=n(43144),l=n(63780),u=n(92026),c=n(27546),h=n(36231),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1?arguments[1]:void 0;(0,a.Z)(this,e),this._compareMinX=m,this._compareMinY=y,this._toBBox=function(e){return e},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this._toBBox=n:this._initFormat(n)),this.clear()}return(0,s.Z)(e,[{key:"destroy",value:function(){this.clear(),k.prune(),C.prune(),R.prune(),M.prune()}},{key:"all",value:function(e){this._all(this._data,e)}},{key:"search",value:function(e,t){var n=this._data,i=this._toBBox;if(b(e,n))for(k.clear();n;){for(var r=0,o=n.children.length;r<o;r++){var a=n.children[r],s=n.leaf?i(a):a;b(e,s)&&(n.leaf?t(a):P(e,s)?this._all(a,t):k.push(a))}n=k.pop()}}},{key:"collides",value:function(e){var t=this._data,n=this._toBBox;if(!b(e,t))return!1;for(k.clear();t;){for(var i=0,r=t.children.length;i<r;i++){var o=t.children[i],a=t.leaf?n(o):o;if(b(e,a)){if(t.leaf||P(e,a))return!0;k.push(o)}}t=k.pop()}return!1}},{key:"load",value:function(e){if(!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var i=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===i.height)this._splitRoot(this._data,i);else{if(this._data.height<i.height){var r=this._data;this._data=i,i=r}this._insert(i,this._data.height-i.height-1,!0)}else this._data=i;return this}},{key:"insert",value:function(e){return e&&this._insert(e,this._data.height-1),this}},{key:"clear",value:function(){return this._data=new B([]),this}},{key:"remove",value:function(e){if(!e)return this;var t,n=this._data,i=null,r=0,o=!1,a=this._toBBox(e);for(R.clear(),M.clear();n||R.length>0;){var s;if(n||(n=(0,u.j0)(R.pop()),i=R.data[R.length-1],r=null!==(s=M.pop())&&void 0!==s?s:0,o=!0),n.leaf&&-1!==(t=(0,l.cq)(n.children,e,n.children.length,n.indexHint)))return n.children.splice(t,1),R.push(n),this._condense(R),this;o||n.leaf||!P(n,a)?i?(r++,n=i.children[r],o=!1):n=null:(R.push(n),M.push(r),r=0,i=n,n=n.children[0])}return this}},{key:"toJSON",value:function(){return this._data}},{key:"fromJSON",value:function(e){return this._data=e,this}},{key:"_all",value:function(e,t){var n=e;for(C.clear();n;){var i;if(!0===n.leaf){var r,a=(0,o.Z)(n.children);try{for(a.s();!(r=a.n()).done;){t(r.value)}}catch(s){a.e(s)}finally{a.f()}}else C.pushArray(n.children);n=null!==(i=C.pop())&&void 0!==i?i:null}}},{key:"_build",value:function(e,t,n,i){var r=n-t+1,o=this._maxEntries;if(r<=o){var a=new B(e.slice(t,n+1));return d(a,this._toBBox),a}i||(i=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,i-1)));var s=new S([]);s.height=i;var l=Math.ceil(r/o),u=l*Math.ceil(Math.sqrt(o));w(e,t,n,u,this._compareMinX);for(var c=t;c<=n;c+=u){var h=Math.min(c+u-1,n);w(e,c,h,l,this._compareMinY);for(var f=c;f<=h;f+=l){var p=Math.min(f+l-1,h);s.children.push(this._build(e,f,p,i-1))}}return d(s,this._toBBox),s}},{key:"_chooseSubtree",value:function(e,t,n,i){for(;i.push(t),!0!==t.leaf&&i.length-1!==n;){for(var r=void 0,o=1/0,a=1/0,s=0,l=t.children.length;s<l;s++){var u=t.children[s],c=_(u),h=g(e,u)-c;h<a?(a=h,o=c<o?c:o,r=u):h===a&&c<o&&(o=c,r=u)}t=r||t.children[0]}return t}},{key:"_insert",value:function(e,t,n){var i=this._toBBox,r=n?e:i(e);R.clear();var o=this._chooseSubtree(r,this._data,t,R);for(o.children.push(e),v(o,r);t>=0&&R.data[t].children.length>this._maxEntries;)this._split(R,t),t--;this._adjustParentBBoxes(r,R,t)}},{key:"_split",value:function(e,t){var n=e.data[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i);if(o){var a=n.children.splice(o,n.children.length-o),s=n.leaf?new B(a):new S(a);s.height=n.height,d(n,this._toBBox),d(s,this._toBBox),t?e.data[t-1].children.push(s):this._splitRoot(n,s)}else console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}},{key:"_splitRoot",value:function(e,t){this._data=new S([e,t]),this._data.height=e.height+1,d(this._data,this._toBBox)}},{key:"_chooseSplitIndex",value:function(e,t,n){var i,r,o;i=r=1/0;for(var a=t;a<=n-t;a++){var s=p(e,0,a,this._toBBox),l=p(e,a,n,this._toBBox),u=Z(s,l),c=_(s)+_(l);u<i?(i=u,o=a,r=c<r?c:r):u===i&&c<r&&(r=c,o=a)}return o}},{key:"_chooseSplitAxis",value:function(e,t,n){var i=e.leaf?this._compareMinX:m,r=e.leaf?this._compareMinY:y;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,r)&&e.children.sort(i)}},{key:"_allDistMargin",value:function(e,t,n,i){e.children.sort(i);for(var r=this._toBBox,o=p(e,0,t,r),a=p(e,n-t,n,r),s=x(o)+x(a),l=t;l<n-t;l++){var u=e.children[l];v(o,e.leaf?r(u):u),s+=x(o)}for(var c=n-t-1;c>=t;c--){var h=e.children[c];v(a,e.leaf?r(h):h),s+=x(a)}return s}},{key:"_adjustParentBBoxes",value:function(e,t,n){for(var i=n;i>=0;i--)v(t.data[i],e)}},{key:"_condense",value:function(e){for(var t=e.length-1;t>=0;t--){var n=e.data[t];if(0===n.children.length)if(t>0){var i=e.data[t-1],r=i.children;r.splice((0,l.cq)(r,n,r.length,i.indexHint),1)}else this.clear();else d(n,this._toBBox)}}},{key:"_initFormat",value:function(e){var t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}]),e}();function d(e,t){p(e,0,e.children.length,t,e)}function p(e,t,n,i,r){r||(r=new B([])),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=t;a<n;a++)o=e.children[a],v(r,e.leaf?i(o):o);return r}function v(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function m(e,t){return e.minX-t.minX}function y(e,t){return e.minY-t.minY}function _(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function x(e){return e.maxX-e.minX+(e.maxY-e.minY)}function g(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Z(e,t){var n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}function P(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function b(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function w(e,t,n,i,r){for(var o=[t,n];o.length;){var a=(0,u.j0)(o.pop()),s=(0,u.j0)(o.pop());if(!(a-s<=i)){var l=s+Math.ceil((a-s)/i/2)*i;(0,h.q)(e,l,s,a,r),o.push(s,l,l,a)}}}var k=new c.Z,C=new c.Z,R=new c.Z,M=new c.Z({deallocator:void 0}),I=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).height=1,e.indexHint=new l.SO,e}return(0,s.Z)(n)}((0,s.Z)((function e(){(0,a.Z)(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}))),B=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this)).children=e,i.leaf=!0,i}return(0,s.Z)(n)}(I),S=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this)).children=e,i.leaf=!1,i}return(0,s.Z)(n)}(I)},67593:function(e,t,n){n.d(t,{E:function(){return d},H:function(){return f}});var i=n(29439),r=n(22753),o=n(11873),a=n(88396),s=n(11186),l=(0,n(71353).c)(),u=(0,o.c)(),c=(0,o.c)(),h=(0,o.c)();function f(e,t,n){return(0,s.s)(l,t[0],t[1],1),(0,s.t)(l,l,(0,r.t)(u,n)),0===l[2]?(0,a.s)(e,l[0],l[1]):(0,a.s)(e,l[0]/l[2],l[1]/l[2])}function d(e,t,n){return p(c,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),p(h,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]),(0,r.m)(e,(0,r.a)(c,c),h),0!==e[8]&&(e[0]/=e[8],e[1]/=e[8],e[2]/=e[8],e[3]/=e[8],e[4]/=e[8],e[5]/=e[8],e[6]/=e[8],e[7]/=e[8],e[8]/=e[8]),e}function p(e,t,n,o,a,c,h,f,d){(0,r.s)(e,t,o,c,n,a,h,1,1,1),(0,s.s)(l,f,d,1),(0,r.a)(u,e);var p=(0,s.t)(l,l,(0,r.t)(u,u)),v=(0,i.Z)(p,3),m=v[0],y=v[1],_=v[2];return(0,r.s)(u,m,0,0,0,y,0,0,0,_),(0,r.m)(e,u,e)}},47991:function(e,t,n){n.d(t,{SR:function(){return v},Ui:function(){return p}});var i=n(43144),r=n(15671),o=n(37762),a=n(29439),s=n(92026),l=n(65156),u=n(376),c=n(69662),h=n(77981),f=n(76335),d=n(92975);function p(e){return m(e,!0)}function v(e){return m(e,!1)}function m(e,t){if((0,s.Wi)(e))return null;var n=e.spatialReference,i=(0,d.C5)(n),r="toJSON"in e?e.toJSON():e;if(!i)return r;var o=(0,d.sS)(n)?102100:4326,a=f.UZ[o].maxX,l=f.UZ[o].minX;if((0,h.wp)(r))return _(r,a,l);if((0,h.aW)(r))return r.points=r.points.map((function(e){return _(e,a,l)})),r;if((0,h.YX)(r))return y(r,i);if((0,h.oU)(r)||(0,h.l9)(r)){var c=(0,u.$P)(w,r),p={xmin:c[0],ymin:c[1],xmax:c[2],ymax:c[3]},v=(0,f.XZ)(p.xmin,l)*(2*a),m=0===v?r:(0,f.Sy)(r,v);return p.xmin+=v,p.xmax+=v,p.xmax>a?P(m,a,t):p.xmin<l?P(m,l,t):m}return r}function y(e,t){if(!t)return e;var n=function(e,t){var n=[],i=e.ymin,r=e.ymax,o=e.xmin,s=e.xmax,l=e.xmax-e.xmin,u=(0,a.Z)(t.valid,2),c=u[0],h=u[1],f=x(e.xmin,t),d=f.x,p=f.frameId,v=x(e.xmax,t),m=v.x,y=v.frameId,_=d===m&&l>0;if(l>2*h){var Z={xmin:o<s?d:m,ymin:i,xmax:h,ymax:r},P={xmin:c,ymin:i,xmax:o<s?m:d,ymax:r},w={xmin:0,ymin:i,xmax:h,ymax:r},k={xmin:c,ymin:i,xmax:0,ymax:r},C=[],R=[];g(Z,w)&&C.push(p),g(Z,k)&&R.push(p),g(P,w)&&C.push(y),g(P,k)&&R.push(y);for(var M=p+1;M<y;M++)C.push(M),R.push(M);n.push(new b(Z,[p]),new b(P,[y]),new b(w,C),new b(k,R))}else d>m||_?n.push(new b({xmin:d,ymin:i,xmax:h,ymax:r},[p]),new b({xmin:c,ymin:i,xmax:m,ymax:r},[y])):n.push(new b({xmin:d,ymin:i,xmax:m,ymax:r},[p]));return n}(e,t).map((function(e){return e.extent}));return n.length<2?n[0]||e:n.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:n.map((function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]}))}}function _(e,t,n){if(Array.isArray(e)){var i=e[0];if(i>t){var r=(0,f.XZ)(i,t);e[0]=i+r*(-2*t)}else if(i<n){var o=(0,f.XZ)(i,n);e[0]=i+o*(-2*n)}}else{var a=e.x;if(a>t){var s=(0,f.XZ)(a,t);e.x+=s*(-2*t)}else if(a<n){var l=(0,f.XZ)(a,n);e.x+=l*(-2*n)}}return e}function x(e,t){var n,i=(0,a.Z)(t.valid,2),r=i[0],o=i[1],s=2*o,l=0;return e>o?(e-=(n=Math.ceil(Math.abs(e-o)/s))*s,l=n):e<r&&(e+=(n=Math.ceil(Math.abs(e-r)/s))*s,l=-n),{x:e,frameId:l}}function g(e,t){var n=t.xmin,i=t.ymin,r=t.xmax,o=t.ymax;return Z(e,n,i)&&Z(e,n,o)&&Z(e,r,o)&&Z(e,r,i)}function Z(e,t,n){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax}function P(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(0,h.l9)(e);if(i&&(0,c.Zy)(e),n)return(new k).cut(e,t);for(var r=i?e.rings:e.paths,a=i?4:2,s=r.length,l=-2*t,u=0;u<s;u++){var f=r[u];if(f&&f.length>=a){var d,p=[],v=(0,o.Z)(f);try{for(v.s();!(d=v.n()).done;){var m=d.value;p.push([m[0]+l,m[1]])}}catch(y){v.e(y)}finally{v.f()}r.push(p)}}return i?e.rings=r:e.paths=r,e}var b=(0,i.Z)((function e(t,n){(0,r.Z)(this,e),this.extent=t,this.frameIds=n})),w=(0,l.Ue)(),k=function(){function e(){(0,r.Z)(this,e),this._linesIn=[],this._linesOut=[]}return(0,i.Z)(e,[{key:"cut",value:function(e,t){var n;if(this._xCut=t,e.rings)this._closed=!0,n=e.rings,this._minPts=4;else{if(!e.paths)return null;this._closed=!1,n=e.paths,this._minPts=2}var i,r=(0,o.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a&&!(a.length<this._minPts)){var s,l=!0,u=(0,o.Z)(a);try{for(u.s();!(s=u.n()).done;){var c=s.value;l?(this.moveTo(c),l=!1):this.lineTo(c)}}catch(g){u.e(g)}finally{u.f()}this._closed&&this.close()}}}catch(g){r.e(g)}finally{r.f()}this._pushLineIn(),this._pushLineOut(),n=[];var h,f=(0,o.Z)(this._linesIn);try{for(f.s();!(h=f.n()).done;){var d=h.value;d&&d.length>=this._minPts&&n.push(d)}}catch(g){f.e(g)}finally{f.f()}var p,v=-2*this._xCut,m=(0,o.Z)(this._linesOut);try{for(m.s();!(p=m.n()).done;){var y=p.value;if(y&&y.length>=this._minPts){var _,x=(0,o.Z)(y);try{for(x.s();!(_=x.n()).done;){_.value[0]+=v}}catch(g){x.e(g)}finally{x.f()}n.push(y)}}}catch(g){m.e(g)}finally{m.f()}return this._closed?e.rings=n:e.paths=n,e}},{key:"moveTo",value:function(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}},{key:"lineTo",value:function(e){var t=this._side(e[0]);if(t*this._prevSide==-1){var n=this._intersect(this._prevPt,e);this._lineTo(this._xCut,n,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}},{key:"close",value:function(){var e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}},{key:"_moveTo",value:function(e,t,n){this._closed?(this._lineIn.push([n<=0?e:this._xCut,t]),this._lineOut.push([n>=0?e:this._xCut,t])):(n<=0&&this._lineIn.push([e,t]),n>=0&&this._lineOut.push([e,t]))}},{key:"_lineTo",value:function(e,t,n){this._closed?(this._addPolyVertex(this._lineIn,n<=0?e:this._xCut,t),this._addPolyVertex(this._lineOut,n>=0?e:this._xCut,t)):n<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([e,t])):n>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([e,t])):this._prevSide<0?(this._lineIn.push([e,t]),this._lineOut.push([e,t])):this._prevSide>0&&(this._lineOut.push([e,t]),this._lineIn.push([e,t]))}},{key:"_addPolyVertex",value:function(e,t,n){var i=e.length;i>1&&e[i-1][0]===t&&e[i-2][0]===t?e[i-1][1]=n:e.push([t,n])}},{key:"_checkClosingPt",value:function(e){var t=e.length;t>3&&e[0][0]===this._xCut&&e[t-2][0]===this._xCut&&e[1][0]===this._xCut&&(e[0][1]=e[t-2][1],e.pop())}},{key:"_side",value:function(e){return e<this._xCut?-1:e>this._xCut?1:0}},{key:"_intersect",value:function(e,t){var n=(this._xCut-e[0])/(t[0]-e[0]);return e[1]+n*(t[1]-e[1])}},{key:"_pushLineIn",value:function(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}},{key:"_pushLineOut",value:function(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}]),e}()},88839:function(e,t,n){n.r(t),n.d(t,{default:function(){return Qe}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(40281),u=n(10064),c=n(32718),h=n(92026),f=n(97642),d=n(49861),p=n(89125),v=(n(63780),n(38511)),m=n(69912),y=n(31201),_=n(30651),x=n(6693),g=n(6061),Z=n(56811),P=n(74165),b=n(15861),w=n(1413),k=n(76200),C=n(35995),R=n(71907),M=(n(25243),n(79056)),I=n(46784),B=n(54472),S=n(29439),W=n(93433),j=n(85015),X=n(67593),O=n(17842),Y=n(22753),L=n(11873),T=n(88396),E=n(6394),H=n(585),z=n(80885),V=n(52587),A=n(78952),N=n(11582),U=(n(93169),function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"projectOrWarn",value:function(e,t){if((0,h.Wi)(e))return e;var n=(0,V.dz)(e,t),i=n.geometry,r=n.pending;return r?null:r||i?i:(c.Z.getLogger(this.declaredClass).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:e,sourceSpatialReference:e.spatialReference,targetSpatialReference:t}),null)}}]),n}(N.j)),F=U=(0,s._)([(0,m.j)("esri.layers.support.GeoreferenceBase")],U),J=(0,L.c)(),q=(0,E.a)(),G=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).sourcePoint=null,e.mapPoint=null,e}return(0,r.Z)(n)}(j.Z);(0,s._)([(0,d.Cb)()],G.prototype,"sourcePoint",void 0),(0,s._)([(0,d.Cb)({type:H.Z})],G.prototype,"mapPoint",void 0),G=(0,s._)([(0,m.j)("esri.layers.support.ControlPoint")],G);var D=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).controlPoints=null,r.height=0,r.type="control-points",r.width=0,r}return(0,r.Z)(n,[{key:"readControlPoints",value:function(e,t){var n=A.Z.fromJSON(t.spatialReference),i=L.f.apply(void 0,(0,W.Z)(t.coefficients).concat([1]));return e.map((function(e){return(0,T.s)(q,e.x,e.y),(0,X.H)(q,q,i),{sourcePoint:e,mapPoint:new H.Z({x:q[0],y:q[1],spatialReference:n})}}))}},{key:"writeControlPoints",value:function(e,t,n,i){if((0,h.Wi)(this.transform)){var r=new u.Z("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration.",{layer:null===i||void 0===i?void 0:i.layer,georeference:this});null!==i&&void 0!==i&&i.messages?i.messages.push(r):c.Z.getLogger(this.declaredClass).error(r.name,r.message)}else(0,h.pC)(e)&&K(e[0])&&(t.controlPoints=e.map((function(e){var t=(0,h.Wg)(e.sourcePoint);return{x:t.x,y:t.y}})),t.spatialReference=e[0].mapPoint.spatialReference.toJSON(),t.coefficients=this.transform.slice(0,8))}},{key:"coords",get:function(){if((0,h.Wi)(this.controlPoints))return null;var e=this._updateTransform(J);if((0,h.Wi)(e)||!K(this.controlPoints[0]))return null;var t=this.controlPoints[0].mapPoint.spatialReference;return function(e,t,n,i){var r=(0,E.f)(0,n),o=(0,E.f)(0,0),a=(0,E.f)(t,0),s=(0,E.f)(t,n);return(0,X.H)(r,r,e),(0,X.H)(o,o,e),(0,X.H)(a,a,e),(0,X.H)(s,s,e),new z.Z({rings:[[r,o,a,s,r]],spatialReference:i})}(e,this.width,this.height,t)},set:function(e){if(!(0,h.Wi)(this.controlPoints)&&K(this.controlPoints[0])){var t=this.controlPoints[0].mapPoint.spatialReference;if(e=this.projectOrWarn(e,t),!(0,h.Wi)(e)){var n=this.width,i=this.height,r=e,o=(0,S.Z)(r.rings,1),a=(0,S.Z)(o[0],4),s=a[0],l=a[1],u=a[2],c=a[3],f={sourcePoint:(0,O.vW)(0,i),mapPoint:new H.Z({x:s[0],y:s[1],spatialReference:t})},d={sourcePoint:(0,O.vW)(0,0),mapPoint:new H.Z({x:l[0],y:l[1],spatialReference:t})},p={sourcePoint:(0,O.vW)(n,0),mapPoint:new H.Z({x:u[0],y:u[1],spatialReference:t})},v={sourcePoint:(0,O.vW)(n,i),mapPoint:new H.Z({x:c[0],y:c[1],spatialReference:t})};K(f)&&K(d)&&K(p)&&K(v)&&(le(J,f,d,p,v),this.controlPoints=(0,h.Wg)(this.controlPoints).map((function(e){var n=e.sourcePoint;return(0,T.s)(q,n.x,n.y),(0,X.H)(q,q,J),{sourcePoint:n,mapPoint:new H.Z({x:q[0],y:q[1],spatialReference:t})}})))}}}},{key:"inverseTransform",get:function(){return(0,h.Wi)(this.transform)?null:(0,Y.e)((0,L.c)(),this.transform)}},{key:"transform",get:function(){return this._updateTransform()}},{key:"toMap",value:function(e){if((0,h.Wi)(e)||(0,h.Wi)(this.transform)||(0,h.Wi)(this.controlPoints)||!K(this.controlPoints[0]))return null;(0,T.s)(q,e.x,e.y);var t=this.controlPoints[0].mapPoint.spatialReference;return(0,X.H)(q,q,this.transform),new H.Z({x:q[0],y:q[1],spatialReference:t})}},{key:"toSource",value:function(e){if((0,h.Wi)(e)||(0,h.Wi)(this.inverseTransform)||(0,h.Wi)(this.controlPoints)||!K(this.controlPoints[0]))return null;var t=this.controlPoints[0].mapPoint.spatialReference;return e=e.normalize(),e=(0,V.dz)(e,t).geometry,(0,h.Wi)(e)?null:((0,T.s)(q,e.x,e.y),(0,X.H)(q,q,this.inverseTransform),(0,O.vW)(q[0],q[1]))}},{key:"_updateTransform",value:function(e){var t=this.controlPoints,n=this.width,i=this.height;if((0,h.Wi)(t)||!(n>0)||!(i>0))return null;var r=(0,S.Z)(t,4),o=r[0],a=r[1],s=r[2],l=r[3];if(!K(o))return null;var u=o.mapPoint.spatialReference,c=this._projectControlPoint(a,u),f=this._projectControlPoint(s,u),d=this._projectControlPoint(l,u);if(!c.valid||!f.valid||!d.valid)return null;if(!K(c.controlPoint))return null;(0,h.Wi)(e)&&(e=(0,L.c)());var p=null;return p=K(f.controlPoint)&&K(d.controlPoint)?le(e,o,c.controlPoint,f.controlPoint,d.controlPoint):K(f.controlPoint)?function(e,t,n,i){return se(Q,ne,t),se($,ie,n),se(ee,re,i),(0,T.l)(te,Q,$,.5),(0,T.r)(te,ee,te,Math.PI),(0,T.l)(oe,ne,ie,.5),(0,T.r)(oe,re,oe,Math.PI),fe(e,Q,$,ee,te,ne,ie,re,oe)}(e,o,c.controlPoint,f.controlPoint):function(e,t,n){return se(Q,ne,t),se($,ie,n),(0,T.r)(ee,$,Q,ae),(0,T.r)(te,Q,$,ae),(0,T.r)(re,ie,ne,-ae),(0,T.r)(oe,ne,ie,-ae),fe(e,Q,$,ee,te,ne,ie,re,oe)}(e,o,c.controlPoint),p.every((function(e){return 0===e}))?null:p}},{key:"_projectControlPoint",value:function(e,t){if(!K(e))return{valid:!0,controlPoint:e};var n=e.sourcePoint,i=e.mapPoint,r=(0,V.dz)(i,t),o=r.geometry,a=r.pending;return a?{valid:!1,controlPoint:null}:a||o?{valid:!0,controlPoint:{sourcePoint:n,mapPoint:o}}:(c.Z.getLogger(this.declaredClass).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:e,sourceSpatialReference:i.spatialReference,targetSpatialReference:t}),{valid:!1,controlPoint:null})}}]),n}((0,I.eC)(F));function K(e){return(0,h.pC)(e)&&(0,h.pC)(e.sourcePoint)&&(0,h.pC)(e.mapPoint)}(0,s._)([(0,d.Cb)({type:[G],json:{write:{allowNull:!1,isRequired:!0}}})],D.prototype,"controlPoints",void 0),(0,s._)([(0,v.r)("controlPoints")],D.prototype,"readControlPoints",null),(0,s._)([(0,y.c)("controlPoints")],D.prototype,"writeControlPoints",null),(0,s._)([(0,d.Cb)()],D.prototype,"coords",null),(0,s._)([(0,d.Cb)({json:{write:!0}})],D.prototype,"height",void 0),(0,s._)([(0,d.Cb)({readOnly:!0})],D.prototype,"inverseTransform",null),(0,s._)([(0,d.Cb)({readOnly:!0})],D.prototype,"transform",null),(0,s._)([(0,d.Cb)({json:{write:!0}})],D.prototype,"width",void 0),D=(0,s._)([(0,m.j)("esri.layers.support.ControlPointsGeoreference")],D);var Q=(0,E.a)(),$=(0,E.a)(),ee=(0,E.a)(),te=(0,E.a)(),ne=(0,E.a)(),ie=(0,E.a)(),re=(0,E.a)(),oe=(0,E.a)(),ae=Math.PI/2;function se(e,t,n){(0,T.s)(e,n.sourcePoint.x,n.sourcePoint.y),(0,T.s)(t,n.mapPoint.x,n.mapPoint.y)}function le(e,t,n,i,r){return se(Q,ne,t),se($,ie,n),se(ee,re,i),se(te,oe,r),fe(e,Q,$,ee,te,ne,ie,re,oe)}var ue=new Array(8).fill(0),ce=new Array(8).fill(0);function he(e,t,n,i,r){return e[0]=t[0],e[1]=t[1],e[2]=n[0],e[3]=n[1],e[4]=i[0],e[5]=i[1],e[6]=r[0],e[7]=r[1],e}function fe(e,t,n,i,r,o,a,s,l){return(0,X.E)(e,he(ue,t,n,i,r),he(ce,o,a,s,l))}var de=D,pe=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).bottomLeft=null,r.bottomRight=null,r.topLeft=null,r.topRight=null,r.type="corners",r}return(0,r.Z)(n,[{key:"coords",get:function(){var e=this.topLeft,t=this.topRight,n=this.bottomLeft,i=this.bottomRight;if((0,h.Wi)(e)||(0,h.Wi)(t)||(0,h.Wi)(n)||(0,h.Wi)(i))return null;var r=e.spatialReference;return t=this.projectOrWarn(t,r),n=this.projectOrWarn(n,r),i=this.projectOrWarn(i,r),(0,h.Wi)(t)||(0,h.Wi)(n)||(0,h.Wi)(i)?null:new z.Z({rings:[[[n.x,n.y],[e.x,e.y],[t.x,t.y],[i.x,i.y],[n.x,n.y]]],spatialReference:r})},set:function(e){var t=this.topLeft;if(!(0,h.Wi)(t)){var n=t.spatialReference;if(e=this.projectOrWarn(e,n),!(0,h.Wi)(e)){var i=e,r=(0,S.Z)(i.rings,1),o=(0,S.Z)(r[0],4),a=o[0],s=o[1],l=o[2],u=o[3];this.bottomLeft=new H.Z({x:a[0],y:a[1],spatialReference:n}),this.topLeft=new H.Z({x:s[0],y:s[1],spatialReference:n}),this.topRight=new H.Z({x:l[0],y:l[1],spatialReference:n}),this.bottomRight=new H.Z({x:u[0],y:u[1],spatialReference:n})}}}}]),n}(F);(0,s._)([(0,d.Cb)()],pe.prototype,"coords",null),(0,s._)([(0,d.Cb)({type:H.Z})],pe.prototype,"bottomLeft",void 0),(0,s._)([(0,d.Cb)({type:H.Z})],pe.prototype,"bottomRight",void 0),(0,s._)([(0,d.Cb)({type:H.Z})],pe.prototype,"topLeft",void 0),(0,s._)([(0,d.Cb)({type:H.Z})],pe.prototype,"topRight",void 0);var ve=pe=(0,s._)([(0,m.j)("esri.layers.support.CornersGeoreference")],pe),me=n(16889),ye=n(26277),_e=n(53866),xe=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).extent=null,r.rotation=0,r.type="extent-and-rotation",r}return(0,r.Z)(n,[{key:"coords",get:function(){if((0,h.Wi)(this.extent))return null;var e,t=this.extent,n=t.xmin,i=t.ymin,r=t.xmax,o=t.ymax,a=t.spatialReference;if(this.rotation){var s=this.extent.center,l=ge(s.x,s.y,this.rotation);(e=[l(n,i),l(n,o),l(r,o),l(r,i)]).push(e[0])}else e=[[n,i],[n,o],[r,o],[r,i],[n,i]];return new z.Z({rings:[e],spatialReference:a})},set:function(e){if(!(0,h.Wi)(e)&&!(0,h.Wi)(this.extent)){var t=this.extent.spatialReference;if(e=this.projectOrWarn(e,t),!(0,h.Wi)(e)&&!(0,h.Wi)(e.extent)){var n=e,i=(0,S.Z)(n.rings,1),r=(0,S.Z)(i[0],3),o=r[0],a=r[1],s=r[2],l=n.extent.center,u=l.x,c=l.y,f=(0,me.BV)(Math.PI/2-Math.atan2(a[1]-o[1],a[0]-o[0])),d=ge(u,c,-f),p=d(o[0],o[1]),v=(0,S.Z)(p,2),m=v[0],y=v[1],_=d(s[0],s[1]),x=(0,S.Z)(_,2),g=x[0],Z=x[1];this.extent=new _e.Z({xmin:m,ymin:y,xmax:g,ymax:Z,spatialReference:t}),this.rotation=f}}}}]),n}(F);function ge(e,t,n){var i=(0,ye.t)(n),r=Math.cos(i),o=Math.sin(i);return function(n,i){return[r*(n-e)+o*(i-t)+e,r*(i-t)-o*(n-e)+t]}}(0,s._)([(0,d.Cb)()],xe.prototype,"coords",null),(0,s._)([(0,d.Cb)({type:_e.Z})],xe.prototype,"extent",void 0),(0,s._)([(0,d.Cb)({type:Number})],xe.prototype,"rotation",void 0),xe=(0,s._)([(0,m.j)("esri.layers.support.ExtentAndRotationGeoreference")],xe);var Ze={key:"type",base:F,typeMap:{"control-points":de,corners:ve,"extent-and-rotation":xe}},Pe=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).georeference=null,e.opacity=1,e}return(0,r.Z)(n,[{key:"readGeoreference",value:function(e){return de.fromJSON(e)}}]),n}((0,M.iv)((0,I.eC)(B.Z)));(0,s._)([(0,d.Cb)({types:Ze,json:{write:!0}})],Pe.prototype,"georeference",void 0),(0,s._)([(0,v.r)("georeference")],Pe.prototype,"readGeoreference",null),(0,s._)([(0,d.Cb)()],Pe.prototype,"opacity",void 0);var be=Pe=(0,s._)([(0,m.j)("esri.layers.support.MediaElementBase")],Pe),we=n(22892),ke=n(53283),Ce=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).content=null,r.image=null,r.type="image",r.image=null,r}return(0,r.Z)(n,[{key:"load",value:function(){var e=this,t=this.image;if("string"==typeof t){var n=(0,k.default)(t,{responseType:"image"}).then((function(t){var n=t.data;e._set("content",n)}));this.addResolvingPromise(n)}else if(t instanceof HTMLImageElement){var i=t.decode().then((function(){e._set("content",t)}));this.addResolvingPromise(i)}else t?this._set("content",t):this.addResolvingPromise(Promise.reject(new u.Z("image-element:invalid-image-type","Invalid image type",{image:t})));return Promise.resolve(this)}},{key:"readImage",value:function(e,t,n){return(0,ke.f)(t.url,n)}},{key:"writeImage",value:function(e,t,n,i){var r=this;if(!(0,h.Wi)(e)){var o=null===i||void 0===i?void 0:i.portalItem,a=null===i||void 0===i?void 0:i.resources;if(o&&a){var s="string"!=typeof e||(0,C.HK)(e)||(0,C.jc)(e)?null:e;if(s){if(null==(0,ke.i)(s))return void(t[n]=s);var l=(0,ke.t)(s,(0,w.Z)((0,w.Z)({},i),{},{verifyItemRelativeUrls:i&&i.verifyItemRelativeUrls?{writtenUrls:i.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0}),ke.M.NO);if(o&&l&&!(0,C.YP)(l))return a.toKeep.push({resource:o.resourceFromPath(l),compress:!1}),void(t[n]=l)}t[n]="<pending>",a.pendingOperations.push(Me(e).then((function(e){var i=function(e,t){var n=(0,R.D)(),i="".concat((0,C.v_)("media",n),".").concat((0,we.B)(e));return t.resourceFromPath(i)}(e,o);t[n]=i.itemRelativeUrl,a.toAdd.push({resource:i,content:e,compress:!1,finish:function(e){r.image=e.url}})})))}else"string"==typeof e&&(t[n]=(0,ke.t)(e,i))}}}]),n}(be);(0,s._)([(0,d.Cb)({readOnly:!0})],Ce.prototype,"content",void 0),(0,s._)([(0,d.Cb)({json:{name:"url",type:String}})],Ce.prototype,"image",void 0),(0,s._)([(0,v.r)("image",["url"])],Ce.prototype,"readImage",null),(0,s._)([(0,y.c)("image")],Ce.prototype,"writeImage",null),(0,s._)([(0,d.Cb)({readOnly:!0,json:{name:"mediaType"}})],Ce.prototype,"type",void 0);var Re=Ce=(0,s._)([(0,m.j)("esri.layers.support.ImageElement")],Ce);function Me(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,b.Z)((0,P.Z)().mark((function e(t){var n,i;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=14;break}if(!(0,C.jc)(t)){e.next=7;break}return e.next=4,(0,k.default)(t,{responseType:"blob"});case 4:return n=e.sent,i=n.data,e.abrupt("return",i);case 7:if(!(0,C.HK)(t)){e.next=9;break}return e.abrupt("return",(0,C.fw)(t));case 9:return e.t0=Me,e.next=12,(0,k.default)(t,{responseType:"image"});case 12:return e.t1=e.sent.data,e.abrupt("return",(0,e.t0)(e.t1));case 14:return e.abrupt("return",new Promise((function(e){return Be(t).toBlob(e)})));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){if(e instanceof HTMLCanvasElement)return e;var t=e instanceof HTMLImageElement?e.naturalWidth:e.width,n=e instanceof HTMLImageElement?e.naturalHeight:e.height,i=document.createElement("canvas"),r=i.getContext("2d");return i.width=t,i.height=n,e instanceof HTMLImageElement?r.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&r.putImageData(e,0,0),i}var Se=n(37762),We=n(97326),je=(n(59486),n(60354)),Xe=n(91505),Oe=n(41691),Ye=n(67426),Le=n(66978),Te=n(94172),Ee=n(65156),He=n(66504),ze=n(92975),Ve=n(66020),Ae=n(59568),Ne=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).content=null,r.type="video",r}return(0,r.Z)(n,[{key:"load",value:function(){var e=this,t=this.video;if("string"==typeof t){var n=document.createElement("video");n.src=t,n.crossOrigin="anonymous",n.autoplay=!0,n.muted=!0,n.loop=!0,this.addResolvingPromise(this._loadVideo(n).then((function(){e._set("content",n)})))}else t instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(t).then((function(){e._set("content",t)}))):this.addResolvingPromise(Promise.reject(new u.Z("video-element:invalid-video-type","Invalid video type",{video:t})));return Promise.resolve(this)}},{key:"video",set:function(e){"not-loaded"===this.loadStatus?this._set("video",e):c.Z.getLogger(this.declaredClass).error("#video","video cannot be changed after the element is loaded.")}},{key:"_loadVideo",value:function(e){return new Promise((function(t,n){e.oncanplay=function(){e.oncanplay=null,e.play().then(t,n)},"anonymous"!==e.crossOrigin&&(e.crossOrigin="anonymous",e.src=e.src)}))}}]),n}(be);(0,s._)([(0,d.Cb)({readOnly:!0})],Ne.prototype,"content",void 0),(0,s._)([(0,d.Cb)()],Ne.prototype,"video",null);var Ue=Ne=(0,s._)([(0,m.j)("esri.layers.support.VideoElement")],Ne),Fe={key:"type",defaultKeyValue:"image",base:be,typeMap:{image:Re,video:Ue}},Je=l.Z.ofType(Fe),qe=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e))._index=new Ve.H,r._elementViewsMap=new Map,r._elementsIndexes=new Map,r._elementsChangedHandler=function(e){var t,n=(0,Se.Z)(e.removed);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=r._elementViewsMap.get(i);r._elementViewsMap.delete(i),r._index.delete(o),r.handles.remove(o),o.destroy(),r.notifyChange("fullExtent")}}catch(c){n.e(c)}finally{n.f()}var a,s=(0,We.Z)(r).spatialReference,l=(0,Se.Z)(e.added);try{var u=function(){var e=a.value;if(r._elementViewsMap.get(e))return"continue";var t=new Ae.L({spatialReference:s,element:e});r._elementViewsMap.set(e,t);var n=(0,Te.YP)((function(){return t.coords}),(function(){return r._updateIndexForElement(t,!1)}));r._updateIndexForElement(t,!0),r.handles.add(n,t)};for(l.s();!(a=l.n()).done;)u()}catch(c){l.e(c)}finally{l.f()}r._elementsIndexes.clear(),r.elements.forEach((function(e,t){return r._elementsIndexes.set(e,t)})),r.emit("refresh")},r.elements=new Je,r}return(0,r.Z)(n,[{key:"load",value:function(){var e=(0,b.Z)((0,P.Z)().mark((function e(t){var n;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,Le.k_)(t),this.spatialReference||(n=this.elements.find((function(e){return(0,h.pC)(e.georeference)&&(0,h.pC)(e.georeference.coords)})),this._set("spatialReference",n?(0,h.Wg)((0,h.Wg)(n.georeference).coords).spatialReference:A.Z.WGS84)),e.abrupt("return",(this._elementsChangedHandler({added:this.elements.items,removed:[]}),this.handles.add(this.elements.on("change",this._elementsChangedHandler)),this));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this._index.clear(),this._elementViewsMap.clear(),this._elementsIndexes.clear()}},{key:"elements",set:function(e){this._set("elements",(0,je.Z)(e,this._get("elements"),Je))}},{key:"fullExtent",get:function(){if("not-loaded"===this.loadStatus)return null;var e=this._index.fullBounds;return(0,h.Wi)(e)?null:new _e.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:this.spatialReference})}},{key:"spatialReference",set:function(e){"not-loaded"===this.loadStatus?this._set("spatialReference",e):c.Z.getLogger(this.declaredClass).error("#spatialReference","spatialReference cannot be changed after the source is loaded.")}},{key:"queryElements",value:function(){var e=(0,b.Z)((0,P.Z)().mark((function e(t,n){var i,r,o,a,s,l,u=this;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.next=4,(0,V.iQ)(t.spatialReference,this.spatialReference,null,n);case 4:if(i=(0,ze.fS)(t.spatialReference,this.spatialReference)?t:(0,V.iV)(t,this.spatialReference)){e.next=7;break}return e.abrupt("return",[]);case 7:r=i.normalize(),o=[],a=(0,Se.Z)(r),e.prev=9,l=(0,P.Z)().mark((function e(){var t;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.value,u._index.forEachInBounds((0,Ee.oJ)(t),(function(e){var n=e.normalizedCoords,i=e.element;(0,h.pC)(n)&&(0,He.Nl)(t,n)&&o.push(i)}));case 2:case"end":return e.stop()}}),e)})),a.s();case 12:if((s=a.n()).done){e.next=16;break}return e.delegateYield(l(),"t0",14);case 14:e.next=12;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(9),a.e(e.t1);case 21:return e.prev=21,a.f(),e.finish(21);case 24:return e.abrupt("return",(o.sort((function(e,t){return u._elementsIndexes.get(e)-u._elementsIndexes.get(t)})),o));case 25:case"end":return e.stop()}}),e,this,[[9,18,21,24]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_updateIndexForElement",value:function(e,t){var n=e.normalizedBounds,i=this._index.has(e),r=(0,h.pC)(n);this._index.delete(e),r&&this._index.set(e,n),this.notifyChange("fullExtent"),t||(i!==r?this.emit("refresh"):this.emit("change",{element:e.element}))}}]),n}(B.Z.LoadableMixin((0,Ye.v)((0,Oe.p)(Xe.Z.EventedAccessor))));(0,s._)([(0,d.Cb)()],qe.prototype,"elements",null),(0,s._)([(0,d.Cb)({readOnly:!0})],qe.prototype,"fullExtent",null),(0,s._)([(0,d.Cb)()],qe.prototype,"spatialReference",null);var Ge=qe=(0,s._)([(0,m.j)("esri.layers.support.LocalMediaElementSource")],qe);function De(e){return"object"==typeof e&&null!=e&&"type"in e}var Ke=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).effectiveSource=null,r.copyright=null,r.operationalLayerType="MediaLayer",r.spatialReference=null,r.type="media",r.source=new Ge,r}return(0,r.Z)(n,[{key:"load",value:function(e){var t=this,n=this.source;if(!n)return this.addResolvingPromise(Promise.reject(new u.Z("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer."))),Promise.resolve(this);var i=De(n)?new Ge({elements:new l.Z([n])}):n;this._set("effectiveSource",i),this.spatialReference&&(i.spatialReference=this.spatialReference);var r=i.load(e).then((function(){t.spatialReference=i.spatialReference}));return this.addResolvingPromise(r),Promise.resolve(this)}},{key:"destroy",value:function(){var e,t;null!==(e=(0,h.Wg)(this.effectiveSource))&&void 0!==e&&e.destroy(),null===(t=(0,h.Wg)(this.source))||void 0===t||t.destroy()}},{key:"fullExtent",get:function(){return this.loaded?this.effectiveSource.fullExtent:null}},{key:"source",set:function(e){"not-loaded"===this.loadStatus?this._set("source",e):c.Z.getLogger(this.declaredClass).error("#source","source cannot be changed after the layer is loaded.")}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof l.Z?new Ge({elements:e}):e:null}},{key:"readSource",value:function(e,t,n){var i="image"===t.mediaType?new Re:"video"===t.mediaType?new Ue:null;return null!==i&&void 0!==i&&i.read(t,n),i}},{key:"writeSource",value:function(e,t,n,i){var r;e&&De(e)&&"image"===e.type?e.write(t,i):(null===i||void 0===i?void 0:i.messages)&&(null===i||void 0===i||null===(r=i.messages)||void 0===r||r.push(new u.Z("media-layer:unsupported-source","source must be an 'ImageElement'")))}}]),n}((0,x.h)((0,Z.M)((0,g.q)((0,f.R)(_.Z)))));(0,s._)([(0,d.Cb)({readOnly:!0})],Ke.prototype,"effectiveSource",void 0),(0,s._)([(0,d.Cb)({type:String})],Ke.prototype,"copyright",void 0),(0,s._)([(0,d.Cb)({readOnly:!0})],Ke.prototype,"fullExtent",null),(0,s._)([(0,d.Cb)({type:["MediaLayer"]})],Ke.prototype,"operationalLayerType",void 0),(0,s._)([(0,d.Cb)({type:["show","hide"]})],Ke.prototype,"listMode",void 0),(0,s._)([(0,d.Cb)({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1}}})],Ke.prototype,"source",null),(0,s._)([(0,p.p)("source")],Ke.prototype,"castSource",null),(0,s._)([(0,v.r)("source",["url"])],Ke.prototype,"readSource",null),(0,s._)([(0,y.c)("source")],Ke.prototype,"writeSource",null),(0,s._)([(0,d.Cb)()],Ke.prototype,"spatialReference",void 0),(0,s._)([(0,d.Cb)({readOnly:!0})],Ke.prototype,"type",void 0);var Qe=Ke=(0,s._)([(0,m.j)("esri.layers.MediaLayer")],Ke)},66020:function(e,t,n){n.d(t,{H:function(){return h}});var i=n(37762),r=n(15671),o=n(43144),a=n(93169),s=n(13491),l=n(65156),u={minX:0,minY:0,maxX:0,maxY:0};function c(e,t,n){(function(e){u.minX=e[0],u.minY=e[1],u.maxX=e[2],u.maxY=e[3]})(t),e.search(u,n)}var h=function(){function e(){var t=this;(0,r.Z)(this,e),this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s.Q(9,(0,a.Z)("esri-csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){if(t._indexInvalid){var e=new Array(t._idByBounds.size),n=0;t._idByBounds.forEach((function(t,i){e[n++]=i})),t._indexInvalid=!1,t._index.clear(),t._index.load(e)}else t._boundsToLoad.length&&(t._index.load(Array.from(new Set(t._boundsToLoad.filter((function(e){return t._idByBounds.has(e)}))))),t._boundsToLoad.length=0)}}return(0,o.Z)(e,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;var e,t=(0,l.cS)(),n=(0,i.Z)(this._boundsById.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r&&(t[0]=Math.min(r[0],t[0]),t[1]=Math.min(r[1],t[1]),t[2]=Math.max(r[2],t[2]),t[3]=Math.max(r[3],t[3]))}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"valid",get:function(){return!this._indexInvalid}},{key:"clear",value:function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}},{key:"delete",value:function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._loadIndex(),c(this._index,e,(function(e){return t(n._idByBounds.get(e))}))}},{key:"get",value:function(e){return this._boundsById.get(e)}},{key:"has",value:function(e){return this._boundsById.has(e)}},{key:"invalidateIndex",value:function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}},{key:"set",value:function(e,t){if(!this._indexInvalid){var n=this._boundsById.get(e);n&&(this._index.remove(n),this._idByBounds.delete(n))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}]),e}()},59568:function(e,t,n){n.d(t,{L:function(){return m}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(85015),u=n(92026),c=n(49861),h=(n(25243),n(63780),n(69912)),f=n(80885),d=n(52587),p=n(65156),v=n(47991),m=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"bounds",get:function(){var e=this.coords;return(0,u.Wi)(e)||(0,u.Wi)(e.extent)?null:(0,p.oJ)(e.extent)}},{key:"coords",get:function(){var e,t=null===(e=(0,u.Wg)(this.element.georeference))||void 0===e?void 0:e.coords;return(0,d.dz)(t,this.spatialReference).geometry}},{key:"normalizedCoords",get:function(){return f.Z.fromJSON((0,v.Ui)(this.coords))}},{key:"normalizedBounds",get:function(){var e=(0,u.pC)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,u.pC)(e)?(0,p.oJ)(e):null}}]),n}(l.Z);(0,s._)([(0,c.Cb)()],m.prototype,"spatialReference",void 0),(0,s._)([(0,c.Cb)()],m.prototype,"element",void 0),(0,s._)([(0,c.Cb)()],m.prototype,"bounds",null),(0,s._)([(0,c.Cb)()],m.prototype,"coords",null),(0,s._)([(0,c.Cb)()],m.prototype,"normalizedCoords",null),(0,s._)([(0,c.Cb)()],m.prototype,"normalizedBounds",null),m=(0,s._)([(0,h.j)("esri.layers.support.MediaElementView")],m)},22892:function(e,t,n){n.d(t,{B:function(){return r}});var i=n(35995);function r(e){return o[function(e){return e instanceof Blob?e.type:function(e){var t=(0,i.Ml)(e);return l[t]||a}(e.url)}(e)]||s}var o={},a="text/plain",s=o[a],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(var u in l)o[l[u]]=u}}]);
//# sourceMappingURL=8839.289c02f0.chunk.js.map