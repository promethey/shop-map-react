{"version":3,"file":"static/js/3220.0e43ea5d.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js","../node_modules/@arcgis/core/views/2d/layers/features/processors/HeatmapProcessor.js","../node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../core/HandleOwner.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get(\"tileStore.tileScheme.spatialReference\");return e&&e.toJSON()||null}};e([r({readOnly:!0})],s.prototype,\"supportsTileUpdates\",null),e([r({constructOnly:!0})],s.prototype,\"remoteClient\",void 0),e([r({constructOnly:!0})],s.prototype,\"service\",void 0),e([r()],s.prototype,\"spatialReference\",null),e([r({constructOnly:!0})],s.prototype,\"tileInfo\",void 0),e([r({constructOnly:!0})],s.prototype,\"tileStore\",void 0),s=e([o(\"esri.views.2d.layers.features.processors.BaseProcessor\")],s);const p=s;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t,applySome as s}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/Error.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{diff as i}from\"../../../../../core/accessorSupport/diffUtils.js\";import{calculateHeatmapIntensityInfoReaders as o}from\"../../../../../renderers/support/heatmapUtils.js\";import{TILE_SIZE as a}from\"../../../engine/webgl/definitions.js\";import n from\"./BaseProcessor.js\";import{getPow2NeighborKey as d}from\"../support/tileUtils.js\";class p{constructor(e,t){this.offset=e,this.extent=t}}function c(e){const t=e.key,s=new Map,r=256,i=a,o=e.tileInfoView.tileInfo.isWrappable;return s.set(d(t,-1,-1,o).id,new p([-i,-i],[i-r,i-r,i,i])),s.set(d(t,0,-1,o).id,new p([0,-i],[0,i-r,i,i])),s.set(d(t,1,-1,o).id,new p([i,-i],[0,i-r,r,i])),s.set(d(t,-1,0,o).id,new p([-i,0],[i-r,0,i,i])),s.set(d(t,1,0,o).id,new p([i,0],[0,0,r,i])),s.set(d(t,-1,1,o).id,new p([-i,i],[i-r,0,i,r])),s.set(d(t,0,1,o).id,new p([0,i],[0,0,i,r])),s.set(d(t,1,1,o).id,new p([i,i],[0,0,r,r])),s}let l=class extends n{constructor(){super(...arguments),this.type=\"heatmap\",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on(\"update\",this.onTileUpdate.bind(this))])}async update(e,t){const s=t.schema.processors[0];if(\"heatmap\"!==s.type)return;i(this._schema,s)&&(e.mesh=!0,this._schema=s)}onTileUpdate(e){for(const t of e.removed)this._tileKeyToFeatureSets.delete(t.key.id)}onTileClear(e){const t={clear:!0};return this._tileKeyToFeatureSets.delete(e.key.id),this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.id,data:t})}async onTileMessage(e,r,i){this._tileKeyToFeatureSets.has(e.key.id)||this._tileKeyToFeatureSets.set(e.key.id,new Map);const a=this._tileKeyToFeatureSets.get(e.key.id);if(a&&t(r.addOrUpdate)&&r.addOrUpdate.hasFeatures&&a.set(r.addOrUpdate.instance,r),r.end){const t=[],r=c(e);this._tileKeyToFeatureSets.forEach(((i,o)=>{if(o===e.key.id)i.forEach((e=>s(e.addOrUpdate,(e=>t.push(e)))));else if(r.has(o)){const e=r.get(o),[a,n]=e.offset;i.forEach((e=>s(e.addOrUpdate,(e=>{const s=e.transform(a,n,1,1);t.push(s)}))))}}));const a=o(t,this._schema.mesh,512,512),n={tileKey:e.key.id,intensityInfo:a},d=[a.matrix];return this.remoteClient.invoke(\"tileRenderer.onTileData\",n,{...i,transferList:d})}}onTileError(e,t,s){return this.remoteClient.invoke(\"tileRenderer.onTileError\",{tileKey:e.id,error:t},s)}};l=e([r(\"esri.views.2d.layers.features.processors.HeatmapProcessor\")],l);const h=l;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction o(o,l,c,r){const e=o.clone(),n=1<<e.level,t=e.col+l,w=e.row+c;return r&&t<0?(e.col=t+n,e.world-=1):t>=n?(e.col=t-n,e.world+=1):e.col=t,e.row=w,e}export{o as getPow2NeighborKey};\n"],"names":["s","_t","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","get","e","this","toJSON","t","r","readOnly","prototype","constructOnly","p","o","offset","extent","c","Map","i","a","tileInfoView","tileInfo","isWrappable","set","d","id","l","_n","_this","type","_tileKeyToFeatureSets","handles","add","tileStore","on","onTileUpdate","bind","_update","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","schema","processors","abrupt","_schema","mesh","stop","_x","_x2","_step","_iterator","_createForOfIteratorHelper","removed","n","done","delete","err","f","remoteClient","invoke","tileKey","data","clear","_onTileMessage","_callee2","_t2","_r","_a2","_n3","_d","_context2","has","addOrUpdate","hasFeatures","instance","end","forEach","push","_e$offset","_slicedToArray","transform","intensityInfo","matrix","_objectSpread","transferList","_x3","_x4","_x5","error","h","clone","level","col","w","row","world"],"sourceRoot":""}