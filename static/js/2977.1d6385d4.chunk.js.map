{"version":3,"file":"static/js/2977.1d6385d4.chunk.js","mappings":"ilBAI4zDA,EAAE,CAAC,8BAA8B,mCAAmC,+BAA+B,oCAAoC,4BAA4B,iCAAiC,yBAAyB,8BAA8B,gBAAgB,wCAAwC,kDAAkD,iCAAiC,gBAAgB,mBAAmB,kBAAsBC,EAAC,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAJ,GAAyD,SAAAA,IAAiB,IAAAK,GAAAC,EAAAA,EAAAA,GAAA,KAAAN,GAAA,QAAAO,EAAAC,UAAAC,OAAFC,EAAC,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAADF,EAACE,GAAAJ,UAAAI,GAAoP,OAAlPP,EAAAF,EAAAU,KAAAC,MAAAX,EAAA,OAAAY,OAASL,KAAQM,SAAS,OAAOX,EAAKY,YAAY,KAAKZ,EAAKa,qBAAqB,6BAA6Bb,EAAKc,YAAW,EAAGd,EAAKe,WAAW,KAAKf,EAAKgB,iBAAiB,KAAKhB,EAAKiB,KAAK,KAAKjB,EAAKkB,UAAU,KAAKlB,EAAKmB,KAAK,OAAOnB,EAAKoB,IAAI,KAAIpB,CAAA,CAAykH,OAAxkHqB,EAAAA,EAAAA,GAAA1B,EAAA,EAAA2B,IAAA,oBAAAC,MAAA,SAAkBlB,EAAEmB,GAAG,MAAM,iBAAiBnB,GAACoB,EAAAA,EAAAA,GAAA,CAAEL,IAAIf,GAAKmB,GAAGnB,CAAC,GAAC,CAAAiB,IAAA,OAAAC,MAAA,SAAKlB,GAAE,IAAAqB,EAAA,KAAOF,GAAEG,EAAAA,EAAAA,IAAEtB,GAAGA,EAAEuB,OAAO,KAAK,OAAOC,KAAKC,oBAAoBD,KAAKE,eAAe,CAACC,eAAe,CAAC,gBAAgB3B,GAAG4B,MAAMC,EAAAA,IAAGC,MAAM,kBAAIT,EAAKU,cAAcZ,EAAE,KAAIa,QAAQC,QAAQT,KAAK,GAAC,CAAAP,IAAA,qBAAAiB,IAAA,WAAwB,IAAAC,EAAOnC,EAAgB,QAAfmC,EAACX,KAAKY,iBAAS,IAAAD,OAAA,EAAdA,EAAgBvB,KAAKyB,cAAc,OAAOrC,EAAEwB,KAAKc,uBAAuBd,KAAKe,YAAYvC,IAAI,IAAI,GAAC,CAAAiB,IAAA,uBAAAC,MAAA,SAAqBlB,EAAEmB,GAAG,OAAOnB,EAAEA,GAAGmB,EAAEqB,UAAUrB,EAAEqB,SAAS7B,mBAAmB8B,EAAAA,EAAAA,SAAWzC,EAAE,GAAC,CAAAiB,IAAA,iBAAAC,MAAA,SAAelB,EAAEmB,EAAEuB,EAAEC,GAAG,GAAInB,KAAKoB,QAAS5C,EAAlB,CAA2B,IAAM6C,EAAE7C,EAAE8C,QAAQC,UAAUC,SAAS,SAAAC,GAAA,IAAYjD,EAACiD,EAAXpC,UAAS,OAAMb,GAAGA,EAAEkD,UAAUH,SAAS,IAAGG,UAAU5B,EAAE,GAAG6B,GAAC/B,EAAAA,EAAAA,GAAA,CAAEgC,wBAAuB,GAAMT,GAAGE,EAAEQ,SAAS,SAAArD,GAAI,IAAMmB,EAAEnB,EAAEsD,MAAM,CAAC,EAAEH,GAAG7B,EAAEiC,KAAKpC,EAAE,IAAIG,EAAEkC,MAAM,SAAAxD,GAAC,OAAEyD,OAAOC,KAAK1D,GAAGD,OAAO,CAAC,MAAKoB,EAAEwC,OAAOrC,EAAtO,CAAwO,GAAC,CAAAL,IAAA,cAAAiB,IAAA,WAAiB,IAAA0B,EAAC,OAAOpC,KAAKqC,uBAAqC,QAAfD,EAACpC,KAAKY,iBAAS,IAAAwB,OAAA,EAAdA,EAAgBhD,KAAK,GAAC,CAAAK,IAAA,kBAAAC,MAAA,SAAgBlB,GAAG,OAAOC,MAAM6D,QAAQ9D,GAAGA,EAAE+D,KAAK,SAAA/D,GAAC,OAAEgE,EAAAA,EAAAA,IAAEhE,GAAGY,IAAI,IAAG,IAAI,GAAC,CAAAK,IAAA,YAAAC,MAAA,SAAUlB,EAAE0C,EAAEC,GAAO,IAAcrB,GAAlBxB,UAAAC,OAAA,QAAAkE,IAAAnE,UAAA,GAAAA,UAAA,GAAC,CAAC,GAASyB,OAAY4B,EAAE3B,KAAK0C,WAAWlE,EAAE0C,EAAEC,GAAGd,EAAE,CAACsC,aAAa,QAAQ5C,OAAOD,EAAE8C,OAAKhD,EAAAA,EAAAA,GAAA,GAAKI,KAAK6C,oBAAoB,OAAOlD,EAAAA,EAAAA,SAAEgC,EAAEtB,GAAGC,MAAM,SAAA9B,GAAC,OAAEA,EAAEsE,IAAI,GAAE,GAAC,CAAArD,IAAA,uBAAAC,MAAA,eAAAqD,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAC,EAA2B3E,EAAE0C,EAAEC,GAAC,IAAArB,EAAA6B,EAAAtB,EAAA+C,EAAAZ,EAAAa,EAAA/E,UAAA,OAAA2E,EAAAA,EAAAA,KAAAK,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAAoH,OAAhG3D,GAAlBuD,EAAA9E,OAAA,QAAAkE,IAAAY,EAAA,GAAAA,EAAA,GAAC,CAAC,GAAStD,OAAY4B,EAAE3B,KAAK0C,WAAWlE,EAAE0C,EAAEC,GAAGd,EAAE,CAACsC,aAAa,OAAO5C,OAAOD,EAAE8C,OAAKhD,EAAAA,EAAAA,GAAA,GAAKI,KAAK6C,oBAAmBU,EAAAE,KAAA,GAAgB9D,EAAAA,EAAAA,SAAEgC,EAAEtB,GAAE,OAAhB,OAAgB+C,EAAAG,EAAAG,KAAflB,EAACY,EAANN,KAAIS,EAAAI,OAAA,UAAwBC,EAAAA,EAAAA,GAAEpB,EAAEb,IAAE,wBAAA4B,EAAAM,OAAA,GAAAV,EAAA,UAAC,gBAAAW,EAAAC,EAAAC,GAAA,OAAAjB,EAAAnE,MAAA,KAAAN,UAAA,EAAzL,IAAyL,CAAAmB,IAAA,aAAAC,MAAA,SAAWlB,EAAEmB,EAAEuB,GAAE,IAAA+C,EAAAC,EAAO/C,GAAGnB,KAAKmE,cAAcnE,KAAKoE,kBAAkB/C,GAAEgD,EAAAA,EAAAA,KAACzE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAiB,QAAnBqE,EAAKjE,KAAKY,iBAAS,IAAAqD,OAAA,EAAdA,EAAgBrB,OAAK,IAAC0B,WAAWnD,GAAG,MAAQnB,KAAKuE,kBAAgB,IAACC,MAAMxE,KAAKyE,UAAS3E,EAAEE,KAAK0E,YAAY,SAAA7F,OAASiB,GAAGA,EAAEvB,OAAOuB,EAAEH,EAAEG,EAAEvB,QAAsB,QAAf2F,EAAClE,KAAKY,iBAAS,IAAAsD,OAAA,EAAdA,EAAgB9E,KAAI,UAAAP,OAASL,EAAC,KAAAK,OAAIc,EAAC,KAAAd,OAAIqC,GAACrC,OAAGwC,EAAE,IAAIA,EAAE,GAAI,GAAC,CAAA5B,IAAA,UAAAC,MAAA,WAAS,IAAAiF,EAAA,KAAC,OAAOtD,EAAAA,EAAAA,GAAErB,MAAM,SAAAxB,GAAIA,EAAEmG,EAAKC,aAAa,GAAG,GAAC,CAAAnF,IAAA,gBAAAC,MAAA,SAAclB,GAAE,IAAAqG,EAAA,KAAC,OAAO,IAAIrE,SAAS,SAACW,EAAEE,GAAK,GAAGwD,EAAK3F,WAAR,CAAoB,GAAG,MAAM2F,EAAK3F,WAAW4F,WAAW,MAAMD,EAAK3F,WAAW6F,WAAW,MAAM,IAAI7D,EAAAA,EAAE,6BAA6B,sDAAkEC,EAAE,CAAC2B,KAAK+B,EAAK3F,YAAY,KAA7N,CAA8N,IAAI2F,EAAKjE,UAAU,MAAM,IAAIM,EAAAA,EAAE,2BAA2B,8BAA8B,IAAMS,GAAEqD,EAAAA,EAAAA,IAAEH,EAAKjE,UAAUxB,MAAM,IAAGU,EAAAA,EAAAA,IAAE6B,IAAI,gBAAgBA,EAAEsD,WAAW,MAAM,IAAI/D,EAAAA,EAAE,6BAA6B,uDAAsDvB,EAAAA,EAAAA,SAAEkF,EAAKjE,UAAUxB,KAAK,CAACwD,OAAKhD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CAAEqB,EAAE,QAAU4D,EAAKjE,UAAUgC,OAASiC,EAAKN,kBAAgB,IAACC,MAAMK,EAAKJ,SAAQ9B,aAAa,OAAO5C,OAAOvB,IAAI8B,KAAKa,EAAEE,EAA9Y,CAAgZ,IAAIf,MAAM,SAAAX,GAAI,IAAIuB,EAAE2D,EAAKtF,IAAI,GAAGI,EAAEuF,MAAMhE,EAAE2D,EAAKtF,IAAI2B,EAAEiE,QAAQ,UAAU,WAAWN,EAAK3F,WAAWS,EAAEmD,KAAK+B,EAAKO,KAAKzF,EAAEmD,KAAK,CAACuC,OAAO,UAAU9F,IAAIsF,EAAKjE,YAAY,OAAOiE,EAAKS,WAAUC,EAAAA,EAAAA,IAAErE,GAAG,OAAO2D,EAAKW,oBAAoBtE,EAAE1C,GAAG8B,MAAM,SAAA9B,GAAIqG,EAAKO,KAAK,CAACK,eAAejH,GAAG,IAAI4B,OAAO,WAAK,GAAG,GAAG,GAAC,CAAAX,IAAA,sBAAAC,MAAA,SAAoBlB,EAAE2C,GAAG,KAAIuE,EAAAA,EAAAA,IAAElH,GAAG,OAAOgC,QAAQmF,SAAS,IAAMtE,EAAE7C,EAAE2G,QAAQ,kBAAkB,MAAM,QAAQ,OAAOxF,EAAAA,EAAAA,SAAE0B,EAAE,CAACuB,OAAKhD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CAAEqB,EAAE,QAAUjB,KAAKuE,kBAAgB,IAACC,MAAMxE,KAAKyE,SAAQ9B,aAAa,OAAO5C,OAAOoB,IAAIb,MAAM,SAAA9B,GAAI,GAAGA,EAAEsE,MAAMtE,EAAEsE,KAAK2C,eAAe,OAAOjH,EAAEsE,KAAK2C,eAAe,MAAM,IAAIvE,EAAAA,EAAE,mCAAmC,GAAG,GAAC,CAAAzB,IAAA,cAAAC,MAAA,SAAYlB,GAAG,IAAMmB,EAAEnB,EAAEoH,MAAM,gKAAgK,OAAOjG,EAAEA,EAAE,QAAG,CAAM,GAAC,CAAAF,IAAA,yBAAAC,MAAA,SAAuBlB,GAAG,GAAG,MAAMA,EAAE,OAAO,KAAK,IAAImB,EAAEnB,EAAEA,EAAEqC,cAAc,IAAI,IAAIK,EAAE,EAAEC,EAAEtD,EAAEU,OAAO2C,EAAEC,EAAED,IAAI,IAAGvB,EAAE9B,EAAEqD,IAAKL,cAAcgF,SAASrH,GAAG,OAAOsH,EAAAA,EAAAA,IAAE,mCAAmCnG,GAAG,OAAO,IAAI,GAAC,CAAAF,IAAA,yBAAAC,MAAA,SAAuBlB,GAAG,GAAG,MAAMA,EAAE,MAAM,GAAG,IAAMmB,GAAG,IAAInB,EAAEuH,OAAO,+CAA+C7E,GAAG,IAAI1C,EAAEuH,OAAO,iDAAiD,OAAOpG,GAAGuB,EAAE,CAAC1C,EAAEA,EAAE2G,QAAQxF,EAAE,wBAAwB,0BAA0BA,EAAE,wBAAwB,wBAAwB,EAAE,GAAC,CAAAF,IAAA,yBAAAiB,IAAA,WAA6B,OAAOV,KAAKgG,UAAUC,aAAa,KAACnI,CAAA,CAAt4H,EAAeoI,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,IAAE9E,EAAAA,EAAAA,IAAER,EAAAA,EAAAA,IAAEuF,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,GAAEC,EAAAA,iBAA+1HrI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACC,UAAS,KAAMjJ,EAAEkJ,UAAU,qBAAqB,OAAMxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACxH,KAAK,CAAC,OAAO,OAAO,oBAAoBxB,EAAEkJ,UAAU,gBAAW,IAAQxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACG,KAAK,CAAC7B,MAAK,EAAGtD,OAAM,MAAOhE,EAAEkJ,UAAU,iBAAY,IAAQxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACxH,KAAK4H,QAAQD,KAAK,CAAC7B,MAAK,EAAGtD,MAAM,CAACqF,SAAQ,EAAGC,eAAe,iBAAK,CAACD,SAAQ,EAAG,OAAOrJ,EAAEkJ,UAAU,mBAAc,IAAQxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACC,UAAS,EAAGzH,KAAK,CAAC,iCAAiCxB,EAAEkJ,UAAU,4BAAuB,IAAQxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACxH,KAAK4H,WAAWpJ,EAAEkJ,UAAU,kBAAa,IAAQxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,OAAKhJ,EAAEkJ,UAAU,kBAAa,IAAQxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACxH,KAAK2B,EAAAA,KAAKnD,EAAEkJ,UAAU,wBAAmB,IAAQxI,EAAAA,EAAAA,GAAE,EAAC6I,EAAAA,EAAAA,GAAE,mBAAmB,CAAC,mBAAmB,cAAcvJ,EAAEkJ,UAAU,uBAAuB,OAAMxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACxH,KAAKgI,OAAOL,KAAK,CAACM,QAAQ,CAAC,YAAY,CAACnC,MAAK,EAAGtD,OAAM,IAAKsD,MAAK,MAAOtH,EAAEkJ,UAAU,YAAO,IAAQxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACC,UAAS,KAAMjJ,EAAEkJ,UAAU,iBAAY,IAAQxI,EAAAA,EAAAA,GAAE,EAACgJ,EAAAA,EAAAA,GAAE,YAAY,CAACrF,OAAO,CAAC7C,KAAK,CAACmI,EAAAA,OAAO3J,EAAEkJ,UAAU,iBAAiB,OAAMxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACG,KAAK,CAAC7B,MAAK,EAAGtD,OAAM,MAAOhE,EAAEkJ,UAAU,oBAAe,IAAQxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,OAAKhJ,EAAEkJ,UAAU,cAAc,OAAMxI,EAAAA,EAAAA,GAAE,EAACkJ,EAAAA,EAAAA,GAAE,gBAAgB5J,EAAEkJ,UAAU,kBAAkB,OAAMxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAE,CAACC,UAAS,EAAGE,KAAK,CAAC7B,MAAK,MAAOtH,EAAEkJ,UAAU,YAAO,IAAQxI,EAAAA,EAAAA,GAAE,EAACsI,EAAAA,EAAAA,IAAEa,EAAAA,KAAI7J,EAAEkJ,UAAU,WAAM,IAAQlJ,GAAEU,EAAAA,EAAAA,GAAE,EAACoJ,EAAAA,EAAAA,GAAE,0BAA0B9J,IAAKkJ,UAAUhB,UAAUC,eAAc,EAAG,IAAM4B,EAAE/J,C","sources":["../node_modules/@arcgis/core/layers/TileLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../core/Error.js\";import{HandleOwnerMixin as s}from\"../core/HandleOwner.js\";import{loadAll as i}from\"../core/loadAll.js\";import{isSome as o}from\"../core/maybe.js\";import{MultiOriginJSONMixin as a}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as l}from\"../core/promiseUtils.js\";import{urlToObject as n,objectToQuery as p,makeAbsolute as c}from\"../core/urlUtils.js\";import{property as u}from\"../core/accessorSupport/decorators/property.js\";import{cast as m}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/arrayUtils.js\";import{reader as h}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as d}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as y}from\"../core/accessorSupport/decorators/writer.js\";import f from\"../geometry/SpatialReference.js\";import v from\"./Layer.js\";import{APIKeyMixin as g}from\"./mixins/APIKeyMixin.js\";import{ArcGISCachedService as S}from\"./mixins/ArcGISCachedService.js\";import{ArcGISMapService as _}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as j}from\"./mixins/ArcGISService.js\";import{BlendLayer as b}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as T}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as w}from\"./mixins/OperationalLayer.js\";import{PortalLayer as O}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as L}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as R}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as U}from\"./mixins/SublayersOwner.js\";import{parse as P,isHostedAgolService as x,isArcGISUrl as A}from\"./support/arcgisLayerUrl.js\";import{url as I}from\"./support/commonProperties.js\";import{createBitmap as M}from\"./support/imageBitmapUtils.js\";import W from\"./support/Sublayer.js\";const B=[\"Canvas/World_Dark_Gray_Base\",\"Canvas/World_Dark_Gray_Reference\",\"Canvas/World_Light_Gray_Base\",\"Canvas/World_Light_Gray_Reference\",\"Elevation/World_Hillshade\",\"Elevation/World_Hillshade_Dark\",\"Ocean/World_Ocean_Base\",\"Ocean/World_Ocean_Reference\",\"Ocean_Basemap\",\"Reference/World_Boundaries_and_Places\",\"Reference/World_Boundaries_and_Places_Alternate\",\"Reference/World_Transportation\",\"World_Imagery\",\"World_Street_Map\",\"World_Topo_Map\"];let C=class extends(b(U(R(w(O(S(_(j(a(s(L(g(T(v)))))))))))))){constructor(...e){super(...e),this.listMode=\"show\",this.isReference=null,this.operationalLayerType=\"ArcGISTiledMapServiceLayer\",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type=\"tile\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=o(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(l).then((()=>this._fetchService(r)))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,r){return(e=e||r.tileInfo&&r.tileInfo.spatialReference)&&f.fromJSON(e)}writeSublayers(e,r,t,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray(),o=[],a={writeSublayerStructure:!1,...s};i.forEach((e=>{const r=e.write({},a);o.push(r)}));o.some((e=>Object.keys(e).length>1))&&(r.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map((e=>n(e).path)):null}fetchTile(e,t,s,i={}){const{signal:o}=i,a=this.getTileUrl(e,t,s),l={responseType:\"image\",signal:o,query:{...this.refreshParameters}};return r(a,l).then((e=>e.data))}async fetchImageBitmapTile(e,t,s,i={}){const{signal:o}=i,a=this.getTileUrl(e,t,s),l={responseType:\"blob\",signal:o,query:{...this.refreshParameters}},{data:n}=await r(a,l);return M(n,a)}getTileUrl(e,r,t){const s=!this.tilemapCache&&this.supportsBlankTile,i=p({...this.parsedUrl?.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[r%o.length]:this.parsedUrl?.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}loadAll(){return i(this,(e=>{e(this.allSublayers)}))}_fetchService(e){return new Promise(((s,i)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");return void s({data:this.sourceJSON})}if(!this.parsedUrl)throw new t(\"tile-layer:undefined-url\",\"layer's url is not defined\");const a=P(this.parsedUrl.path);if(o(a)&&\"ImageServer\"===a.serverType)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e}).then(s,i)})).then((r=>{let t=this.url;if(r.ssl&&(t=this.url=t.replace(/^http:/i,\"https:\")),this.sourceJSON=r.data,this.read(r.data,{origin:\"service\",url:this.parsedUrl}),10.1===this.version&&!x(t))return this._fetchServerVersion(t,e).then((e=>{this.read({currentVersion:e})})).catch((()=>{}))}))}_fetchServerVersion(e,s){if(!A(e))return Promise.reject();const i=e.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";return r(i,{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:s}).then((e=>{if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new t(\"tile-layer:version-not-available\")}))}_getMapName(e){const r=e.match(/^(?:https?:)?\\/\\/(server\\.arcgisonline\\.com|services\\.arcgisonline\\.com|ibasemaps-api\\.arcgis\\.com)\\/arcgis\\/rest\\/services\\/([^\\/]+(\\/[^\\/]+)*)\\/mapserver/i);return r?r[2]:void 0}_getDefaultAttribution(e){if(null==e)return null;let r;e=e.toLowerCase();for(let t=0,s=B.length;t<s;t++)if(r=B[t],r.toLowerCase().includes(e))return c(\"//static.arcgis.com/attribution/\"+r);return null}_getDefaultTileServers(e){if(null==e)return[];const r=-1!==e.search(/^(?:https?:)?\\/\\/server\\.arcgisonline\\.com/i),t=-1!==e.search(/^(?:https?:)?\\/\\/services\\.arcgisonline\\.com/i);return r||t?[e,e.replace(r?/server\\.arcgisonline/i:/services\\.arcgisonline/i,r?\"services.arcgisonline\":\"server.arcgisonline\")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};e([u({readOnly:!0})],C.prototype,\"attributionDataUrl\",null),e([u({type:[\"show\",\"hide\",\"hide-children\"]})],C.prototype,\"listMode\",void 0),e([u({json:{read:!0,write:!0}})],C.prototype,\"blendMode\",void 0),e([u({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],C.prototype,\"isReference\",void 0),e([u({readOnly:!0,type:[\"ArcGISTiledMapServiceLayer\"]})],C.prototype,\"operationalLayerType\",void 0),e([u({type:Boolean})],C.prototype,\"resampling\",void 0),e([u()],C.prototype,\"sourceJSON\",void 0),e([u({type:f})],C.prototype,\"spatialReference\",void 0),e([h(\"spatialReference\",[\"spatialReference\",\"tileInfo\"])],C.prototype,\"readSpatialReference\",null),e([u({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],C.prototype,\"path\",void 0),e([u({readOnly:!0})],C.prototype,\"sublayers\",void 0),e([y(\"sublayers\",{layers:{type:[W]}})],C.prototype,\"writeSublayers\",null),e([u({json:{read:!1,write:!1}})],C.prototype,\"popupEnabled\",void 0),e([u()],C.prototype,\"tileServers\",null),e([m(\"tileServers\")],C.prototype,\"castTileServers\",null),e([u({readOnly:!0,json:{read:!1}})],C.prototype,\"type\",void 0),e([u(I)],C.prototype,\"url\",void 0),C=e([d(\"esri.layers.TileLayer\")],C),C.prototype.fetchTile.__isDefault__=!0;const D=C;export{D as default};\n"],"names":["B","C","_b","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","e","Array","_key","call","apply","concat","listMode","isReference","operationalLayerType","resampling","sourceJSON","spatialReference","path","sublayers","type","url","_createClass","key","value","r","_objectSpread","_this2","o","signal","this","addResolvingPromise","loadFromPortal","supportedTypes","catch","l","then","_fetchService","Promise","resolve","get","_this$parsedUrl","parsedUrl","toLowerCase","_getDefaultAttribution","_getMapName","tileInfo","f","t","s","loaded","i","slice","reverse","flatten","_ref","toArray","a","writeSublayerStructure","forEach","write","push","some","Object","keys","layers","_this$parsedUrl2","_getDefaultTileServers","isArray","map","n","undefined","getTileUrl","responseType","query","refreshParameters","data","_fetchImageBitmapTile","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$r","_args","wrap","_context","prev","next","sent","abrupt","M","stop","_x","_x2","_x3","_this$parsedUrl3","_this$parsedUrl4","tilemapCache","supportsBlankTile","p","blankTile","customParameters","token","apiKey","tileServers","_this3","allSublayers","_this4","bandCount","pixelSizeX","P","serverType","ssl","replace","read","origin","version","x","_fetchServerVersion","currentVersion","A","reject","match","includes","c","search","fetchTile","__isDefault__","b","U","R","w","O","S","_","j","L","g","T","v","u","readOnly","prototype","json","Boolean","enabled","overridePolicy","h","String","origins","y","W","m","I","d","D"],"sourceRoot":""}