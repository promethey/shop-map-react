{"version":3,"file":"static/js/397.6792d9a5.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{handlesGroup as r}from\"../../../core/handleUtils.js\";import{isNone as s,isSome as o}from\"../../../core/maybe.js\";import{watch as i}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../rest/support/FeatureSet.js\";import p from\"./FeatureLayerView2D.js\";import{toJSONGeometryType as l}from\"./support/util.js\";function u(e,t){if(s(e)&&s(t))return null;const r={};return o(t)&&(r.geometry=t.toJSON()),o(e)&&(r.where=e),r}let m=class extends p{constructor(){super(...arguments),this._enabledEventTypes=new Set,this._isUserPaused=!1,this.errorString=null,this.connectionStatus=\"disconnected\"}initialize(){this.addHandles([i((()=>this.layer.customParameters),(e=>this._proxy.updateCustomParameters(e))),this.layer.on(\"send-message-to-socket\",(e=>this._proxy.sendMessageToSocket(e))),this.layer.on(\"send-message-to-client\",(e=>this._proxy.sendMessageToClient(e))),i((()=>this.layer.purgeOptions),(()=>this._update())),i((()=>this.suspended),(e=>{e?this._proxy.pauseStream():this._isUserPaused||this._proxy.resumeStream()}))],\"constructor\")}get connectionError(){if(this.errorString)return new t(\"stream-controller\",this.errorString)}pause(){this._isUserPaused=!0,this._proxy.pauseStream()}resume(){this._isUserPaused=!1,this._proxy.resumeStream()}on(e,t){if(Array.isArray(e))return r(e.map((e=>this.on(e,t))));const s=[\"data-received\",\"message-received\"].includes(e);s&&(this._enabledEventTypes.add(e),this._proxy.enableEvent(e,!0));const o=super.on(e,t),i=this;return{remove(){o.remove(),s&&(i._proxy.closed||i.hasEventListener(e)||i._proxy.enableEvent(e,!1))}}}queryLatestObservations(e,r){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new t(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),r).then((e=>{const t=c.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.connectionStatus=\"disconnected\"}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(u(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),s=l(e.geometryType),o=e.timeInfo&&e.timeInfo.toJSON()||null,i=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",fields:r,geometryType:s,objectIdField:t,timeInfo:o,source:this.layer.parsedUrl,serviceFilter:u(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enabledEventTypes:Array.from(this._enabledEventTypes.values()),spatialReference:i,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}};e([n()],m.prototype,\"errorString\",void 0),e([n({readOnly:!0})],m.prototype,\"connectionError\",null),e([n()],m.prototype,\"connectionStatus\",void 0),m=e([a(\"esri.views.2d.layers.StreamLayerView2D\")],m);const y=m;export{y as default};\n"],"names":["u","e","t","s","r","o","geometry","toJSON","where","m","_p","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","_enabledEventTypes","Set","_isUserPaused","errorString","connectionStatus","_createClass","key","value","_this2","this","addHandles","i","layer","customParameters","_proxy","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","purgeOptions","_update","suspended","pauseStream","resumeStream","get","_this3","Array","isArray","map","includes","add","enableEvent","_get","_getPrototypeOf","prototype","call","remove","closed","hasEventListener","_this$layer$timeInfo","_this$layer$timeInfo2","_this$layer$timeInfo3","_this4","timeInfo","endField","startField","trackIdField","queryLatestObservations","_cleanUpQuery","then","c","features","forEach","sourceLayer","_this5","_objectSpread","setProperty","set","propertyName","concat","JSON","stringify","definitionExpression","geometryDefinition","_createServiceOptions2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","objectIdField","fields","l","geometryType","spatialReference","abrupt","type","source","parsedUrl","serviceFilter","enabledEventTypes","from","values","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","stop","p","n","readOnly","y","a"],"sourceRoot":""}